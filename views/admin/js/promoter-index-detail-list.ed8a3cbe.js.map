{"version":3,"sources":["webpack:///./src/pages/promoter/index-detail-list.vue","webpack:///src/pages/promoter/index-detail-list.vue","webpack:///./src/pages/promoter/index-detail-list.vue?bcbe","webpack:///./src/pages/promoter/index-detail-list.vue?e6f2","webpack:///./src/pages/promoter/index.js"],"names":["staticRenderFns","mixins","data","list","type","children","user","form","page","search","size","render","mounted","JSON","stringify","params","parse","localStorage","getItem","setItem","this","detail","UID","getList","methods","routerBack","$router","go","stepCount","filter","replaceQuery","empty","switchPage","number","dissolveRelationship","$heshop","component","query","Object","assign","$route","replace","getQuery","isParseInt","keys","forEach","item","i","length","isNaN","parseInt","emptyStatus","filters"],"mappings":"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","file":"js/promoter-index-detail-list.ed8a3cbe.js","sourcesContent":["var render, staticRenderFns\nimport script from \"./index-detail-list.vue?vue&type=script&lang=js&\"\nexport * from \"./index-detail-list.vue?vue&type=script&lang=js&\"\nimport style0 from \"./index-detail-list.vue?vue&type=style&index=0&id=34fa3ca2&lang=less&scoped=true&\"\n\n\n/* normalize component */\nimport normalizer from \"!../../../node_modules/_vue-loader@15.9.6@vue-loader/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  \"34fa3ca2\",\n  null\n  \n)\n\nexport default component.exports","<!--\r\n * @Author: fjt\r\n * @Date: 2021-06-19 22:08:35\r\n * @LastEditors: fjt\r\n * @LastEditTime: 2021-06-20 11:16:27\r\n-->\r\n<script>\r\nimport index from './index.js';\r\n\r\nexport default {\r\n  mixins: [index],\r\n  data() {\r\n    return {\r\n      list: [],\r\n      type: '一级下线',\r\n      children: {},\r\n      user: {},\r\n      form: {\r\n        page: 1,\r\n        search: '',\r\n        type: 0\r\n      },\r\n      page: {\r\n        size: 20\r\n      }\r\n    };\r\n  },\r\n  render() {\r\n    const self = this;\r\n    const type = [\r\n      {\r\n        label: '全部',\r\n        value: 0\r\n      },\r\n      {\r\n        label: '分销商',\r\n        value: 1\r\n      },\r\n      {\r\n        label: '普通下线',\r\n        value: 2\r\n      }\r\n    ];\r\n    return (\r\n      <div>\r\n        <el-breadcrumb>\r\n          <el-breadcrumb-item>\r\n            <a onClick={this.routerBack.bind(this, -2)}>分销列表</a>\r\n          </el-breadcrumb-item>\r\n          <el-breadcrumb-item>\r\n            <a onClick={this.routerBack.bind(this, -1)}>分销商详情</a>\r\n          </el-breadcrumb-item>\r\n          <el-breadcrumb-item>下线列表</el-breadcrumb-item>\r\n        </el-breadcrumb>\r\n        <div class=\"le-card le-card-margin le-userinfo-box flex align-center\">\r\n          <div class=\"le-userinfo flex align-center\">\r\n            <el-avatar size={48} error={() => true}>\r\n              <img src={this.user.avatar} />\r\n            </el-avatar>\r\n            <span class=\"le-username\">{this.user.nickname}</span>\r\n          </div>\r\n          <span class=\"le-title\">{this.type}</span>\r\n          <span class=\"le-number\">{this.children.promoter + this.children.ordinary}</span>\r\n        </div>\r\n        <el-form class=\"le-card le-card-margin\" props={{ model: self.form }} inline={true} label-width=\"112px\">\r\n          <el-form-item label=\"下线搜索\">\r\n            <el-input placeholder=\"输入昵称搜索\" v-model={self.form.search} />\r\n          </el-form-item>\r\n          <el-form-item label=\"下线类型\">\r\n            <el-select placeholder=\"请选择\" v-model={self.form.type}>\r\n              {type.map((item, index) => {\r\n                return <el-option key={index} label={item.label} value={item.value} />;\r\n              })}\r\n            </el-select>\r\n          </el-form-item>\r\n          <div class=\"le-button\">\r\n            <el-button type=\"primary\" onClick={this.filter}>\r\n              筛选\r\n            </el-button>\r\n            <el-button onClick={this.empty}>清空</el-button>\r\n          </div>\r\n        </el-form>\r\n        <div class=\"le-card le-card-margin le-table\">\r\n          <el-table props={{ data: this.list }} row-class-name=\"le-table-row\">\r\n            <el-table-column\r\n              label=\"用户\"\r\n              min-width=\"260px\"\r\n              scopedSlots={{\r\n                default: scope => {\r\n                  return (\r\n                    <div class=\"flex align-center\">\r\n                      <el-avatar size={40} error={() => true}>\r\n                        <img src={scope.row.avatar} />\r\n                      </el-avatar>\r\n                      <i\r\n                        class={`le-icon le-userplatform-icon le-icon-${\r\n                          scope.row.type === 'weapp' ? 'xiaochengxu' : 'wehcat'\r\n                        }`}\r\n                      />\r\n                      <span>{scope.row.nickname}</span>\r\n                    </div>\r\n                  );\r\n                }\r\n              }}\r\n            />\r\n            <el-table-column\r\n              label=\"下级类型\"\r\n              scopedSlots={{\r\n                default: scope => {\r\n                  return scope.row.status && scope.row.status == 2 ? '分销商' : '普通下线';\r\n                }\r\n              }}\r\n            />\r\n            <el-table-column\r\n              label=\"分销商等级\"\r\n              scopedSlots={{\r\n                default: scope => {\r\n                  return scope.row.level_name ? scope.row.level_name : '--';\r\n                }\r\n              }}\r\n            />\r\n            <el-table-column\r\n              label=\"分销商品金额(元)\"\r\n              scopedSlots={{\r\n                default: scope => {\r\n                  return scope.row.sales_amount;\r\n                }\r\n              }}\r\n            />\r\n            <el-table-column\r\n              label=\"贡献佣金金额(元)\"\r\n              scopedSlots={{\r\n                default: scope => {\r\n                  return scope.row.commission;\r\n                }\r\n              }}\r\n            />\r\n            <el-table-column\r\n              label=\"成为下线时间\"\r\n              scopedSlots={{\r\n                default: scope => {\r\n                  return scope.row.bind_time\r\n                    ? this.$moment(new Date(scope.row.bind_time * 1000)).format('Y-MM-DD HH:mm:ss')\r\n                    : '--';\r\n                }\r\n              }}\r\n            />\r\n            <el-table-column\r\n              label=\"操作\"\r\n              scopedSlots={{\r\n                default: scope => {\r\n                  if (scope.row.id != this.user.UID) {\r\n                    return (\r\n                      <el-button class=\"le-table-button\" type=\"text\" onClick={self.dissolveRelationship}>\r\n                        解除关系\r\n                      </el-button>\r\n                    );\r\n                  }\r\n                }\r\n              }}\r\n            />\r\n          </el-table>\r\n          <div class=\"flex le-pagination justify-end\">\r\n            <el-pagination\r\n              background\r\n              current-page={this.form.page}\r\n              layout=\"prev, pager, next, jumper\"\r\n              on-current-change={this.switchPage}\r\n              page-count={this.page.count}\r\n            />\r\n          </div>\r\n        </div>\r\n      </div>\r\n    );\r\n  },\r\n  mounted() {\r\n    let params = this.$route.params;\r\n    if (JSON.stringify(params) === '{}') {\r\n      params = JSON.parse(localStorage.getItem('promoter_children'));\r\n    } else {\r\n      localStorage.setItem('promoter_children', JSON.stringify(params));\r\n    }\r\n\r\n    this.type = params.type == 1 ? '一级下线' : params.type == 2 ? '二级下线' : '三级下线';\r\n    this.children =\r\n      params.type == 1\r\n        ? params.detail.children.first\r\n        : params.type == 2\r\n        ? params.detail.children.second\r\n        : params.detail.children.third;\r\n    params.detail.user['UID'] = params.detail.UID;\r\n    this.user = params.detail.user;\r\n\r\n    this.getList();\r\n  },\r\n  methods: {\r\n    //   路由回退 回到到详情 列表\r\n    routerBack: function (stepCount) {\r\n      this.$router.go(stepCount);\r\n    },\r\n    // 刷选\r\n    filter: function () {\r\n      this.replaceQuery();\r\n      this.getList();\r\n    },\r\n    empty: function () {\r\n      this.form = {\r\n        search: '',\r\n        type: 0,\r\n        page: 1\r\n      };\r\n      this.filter();\r\n    },\r\n    // 页面切换\r\n    switchPage: function (number) {\r\n      this.form.page = number;\r\n      this.replaceQuery();\r\n      this.getList();\r\n    },\r\n    // 解除关系\r\n    dissolveRelationship() {},\r\n    getList: function () {\r\n      this.$heshop\r\n        .promoter(\r\n          'post',\r\n          {\r\n            behavior: 'children_list'\r\n          },\r\n          {\r\n            parent: this.children.parent,\r\n            UID: this.user.UID,\r\n            nickname: this.form.search,\r\n            type: this.form.type\r\n          }\r\n        )\r\n        .page(this.form.page, this.page.size)\r\n        .then(res => {\r\n          let { data, headers } = res;\r\n          this.list = data;\r\n          this.form.page = +headers['x-pagination-current-page'];\r\n          this.page = {\r\n            count: +headers['x-pagination-page-count'],\r\n            size: +headers['x-pagination-per-page'],\r\n            total: +headers['x-pagination-total-count']\r\n          };\r\n        })\r\n        .catch(err => {\r\n          this.$message.error(err.data.message);\r\n        });\r\n    }\r\n  }\r\n};\r\n</script>\r\n\r\n<style lang=\"less\" scoped>\r\n@import './index.less';\r\n\r\n.le-card-margin {\r\n  margin-top: 24px;\r\n}\r\n.le-userinfo-box {\r\n  padding: 32px 48px;\r\n  .le-title:extend(.font-family-yahei) {\r\n    font-size: 16px;\r\n    font-weight: 400;\r\n    color: #8c8c8c;\r\n    margin: 0 24px 0 32px;\r\n  }\r\n  .le-number {\r\n    font-size: 20px;\r\n    font-family: DINPro;\r\n    font-weight: bold;\r\n    color: #262626;\r\n  }\r\n}\r\n.le-userinfo {\r\n  border-right: 1px solid #dcdfe6;\r\n  padding-right: 32px;\r\n}\r\n.le-username:extend(.font-family-yahei) {\r\n  width: 96px;\r\n  height: 17px;\r\n  font-size: 16px;\r\n  font-weight: 400;\r\n  color: #262626;\r\n  margin-left: 25px;\r\n}\r\n.le-button {\r\n  margin-left: 115px;\r\n}\r\n.le-table::v-deep {\r\n  .le-userplatform-icon {\r\n    line-height: 16px;\r\n    margin-left: 16px;\r\n    margin-right: 8px;\r\n  }\r\n  .le-table-row:extend(.font-family-yahei) {\r\n    height: 72px;\r\n    font-size: 14px;\r\n    font-weight: 400;\r\n    color: #262626;\r\n  }\r\n  .le-table-button {\r\n    padding: 9px 0;\r\n  }\r\n}\r\n</style>\r\n","import mod from \"-!../../../node_modules/_cache-loader@4.1.0@cache-loader/dist/cjs.js??ref--12-0!../../../node_modules/_thread-loader@2.1.3@thread-loader/dist/cjs.js!../../../node_modules/_babel-loader@8.2.2@babel-loader/lib/index.js!../../../node_modules/_cache-loader@4.1.0@cache-loader/dist/cjs.js??ref--0-0!../../../node_modules/_vue-loader@15.9.6@vue-loader/lib/index.js??vue-loader-options!./index-detail-list.vue?vue&type=script&lang=js&\"; export default mod; export * from \"-!../../../node_modules/_cache-loader@4.1.0@cache-loader/dist/cjs.js??ref--12-0!../../../node_modules/_thread-loader@2.1.3@thread-loader/dist/cjs.js!../../../node_modules/_babel-loader@8.2.2@babel-loader/lib/index.js!../../../node_modules/_cache-loader@4.1.0@cache-loader/dist/cjs.js??ref--0-0!../../../node_modules/_vue-loader@15.9.6@vue-loader/lib/index.js??vue-loader-options!./index-detail-list.vue?vue&type=script&lang=js&\"","export * from \"-!../../../node_modules/_mini-css-extract-plugin@0.9.0@mini-css-extract-plugin/dist/loader.js??ref--10-oneOf-1-0!../../../node_modules/_css-loader@3.6.0@css-loader/dist/cjs.js??ref--10-oneOf-1-1!../../../node_modules/_vue-loader@15.9.6@vue-loader/lib/loaders/stylePostLoader.js!../../../node_modules/_postcss-loader@3.0.0@postcss-loader/src/index.js??ref--10-oneOf-1-2!../../../node_modules/_less-loader@5.0.0@less-loader/dist/cjs.js??ref--10-oneOf-1-3!../../../node_modules/_cache-loader@4.1.0@cache-loader/dist/cjs.js??ref--0-0!../../../node_modules/_vue-loader@15.9.6@vue-loader/lib/index.js??vue-loader-options!./index-detail-list.vue?vue&type=style&index=0&id=34fa3ca2&lang=less&scoped=true&\"","/*\r\n * @Author: fjt\r\n * @Date: 2021-06-20 11:07:58\r\n * @LastEditors: fjt\r\n * @LastEditTime: 2021-06-20 11:09:29\r\n */\r\nexport default {\r\n  data() {},\r\n  methods: {\r\n    //   路由参数替换\r\n    replaceQuery: function () {\r\n      let query = Object.assign({}, this.$route.query, this.form);\r\n      this.$router.replace({\r\n        query: query\r\n      });\r\n    },\r\n    getQuery(isParseInt = ['page']) {\r\n      let query = this.$route.query;\r\n      Object.keys(query).forEach(item => {\r\n        for (let i = 0; i < isParseInt.length; i++) {\r\n          if (isParseInt[i] === item) {\r\n            if (!isNaN(query[item])) {\r\n              query[item] = parseInt(query[item]);\r\n            } else {\r\n              query[item] = 1;\r\n            }\r\n          }\r\n        }\r\n      });\r\n      return Object.assign(this.form, query);\r\n    },\r\n    emptyStatus() {\r\n      this.$router.replace({\r\n        query: {}\r\n      });\r\n    }\r\n  },\r\n  filters: {}\r\n};\r\n"],"sourceRoot":""}