(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["promoter-index-detail"],{"7c48":function(e,t,i){"use strict";i("b37c")},8799:function(e,t,i){"use strict";i.r(t);var a,l,n,s,r=i("4d63"),o=i("4c02"),c=i.n(o),d=i("1696"),u=i("914c"),f=i("9caa"),m=i("2233"),v=function(){function e(t,i){Object(u["a"])(this,e),Object(d["a"])(this,"myChart",void 0),this.init(t,i)}return Object(f["a"])(e,[{key:"init",value:function(e,t){var i,a=this,l=document.getElementById(e);this.myChart=m["a"](l),i={tooltip:{trigger:"item"},legend:{bottom:"5%",left:"center"},series:[{name:t,type:"pie",radius:["30%","60%"],label:{show:!1},emphasis:{label:{show:!1,fontSize:"40",fontWeight:"bold"}},center:["50%","45%"],data:[]}]},this.myChart.setOption(i),window.onresize=function(){a.myChart.resize()}}},{key:"setOptions",value:function(e){this.myChart.setOption({series:[{data:e}]})}}]),e}(),h=v,p=i("8572"),b=i("8121"),g=(i("e939"),i("5d63"),i("4aa0"),i("0e28")),w={name:"modify-level",data:function(){return{list:[],form:{level:null},rules:{level:[{required:!0,message:"请选择分销商等级"}]}}},props:{value:{type:Boolean,default:!0},info:{type:[Object]}},computed:{showDialog:{get:function(e){var t=e.value;return t},set:function(e){this.$emit("input",e)}}},mounted:function(){var e=this;Object(g["w"])().then((function(t){e.list=t.map((function(t){var i=Object(r["a"])(Object(r["a"])({},t),{},{disabled:!1});return i.level===e.info.level&&(i.disabled=!0),i}))}))},render:function(){var e=this,t=arguments[0],i=this;return t("el-dialog",c()([{attrs:{visible:i.showDialog,title:"修改分销商等级",width:"456px",top:"30vh"}},{on:Object(d["a"])({},"update:visible",(function(e){i.showDialog=e}))}]),[t("el-form",c()([{},{props:{model:i.form,rules:i.rules}},{ref:"form",attrs:{"label-width":"140px"}}]),[t("el-form-item",{attrs:{label:"当前分销商等级"}},[t("span",{class:"level-title"},[i.info.level_name])]),t("el-form-item",{attrs:{label:"修改分销商等级",prop:"level"}},[t("el-select",{class:"le-input--200",model:{value:i.form.level,callback:function(t){e.$set(i.form,"level",t)}}},[i.list.map((function(e,i){return t("el-option",{key:i,attrs:{disabled:e.disabled,label:e.name,value:e.level}})}))])])]),t("div",{slot:"footer"},[t("el-button",{on:{click:function(){return i.showDialog=!1}}},["取消"]),t("el-button",{attrs:{type:"primary"},on:{click:i.submit}},["确定"])])])},methods:{submit:function(){var e=this;this.$refs["form"].validate((function(t){if(!t)return!1;Object(g["g"])(e.info.UID,e.form.level).then((function(){e.showDialog=!1;var t=e.list.find((function(t){return t.level===e.form.level}));e.info.level_name=t.name,e.info.level=t.level,e.form.level=null,e.$message({type:"success",message:"修改分销商等级成功"})}))}))}}},y=w,x=(i("f9d9"),i("cba8")),O=Object(x["a"])(y,a,l,!1,null,"11e71aea",null),k=O.exports,_={components:{clearOut:p["a"],agreeRefuseApply:b["a"],modifyLevel:k},render:function(){var e=this,t=arguments[0],i=this;return t("div",{class:"le-main",directives:[{name:"loading",value:i.loading}]},[t("el-breadcrumb",{attrs:{"separator-class":"el-icon-arrow-right"}},[t("el-breadcrumb-item",[t("a",{on:{click:this.routerBack}},["分销列表"])]),t("el-breadcrumb-item",["分销商详情"])]),t("div",{class:"le-card le-card-margin"},[t("div",{class:"le-card-head flex align-center"},[t("span",{class:"le-card-line"}),t("span",["基本信息"])]),t("div",{class:"le-basicinformation flex"},[t("div",{class:"le-information-one flex align-center flex-direction justify-center"},[t("div",[t("el-avatar",{attrs:{size:80,error:function(){return!0}}},[t("img",{attrs:{src:i.detail.user.avatar}})])]),t("span",{class:"le-name"},[i.detail.user.nickname]),t("span",{class:"le-id"},["ID:",i.detail.UID])]),t("div",{class:"le-information-two"},[t("p",{class:"le-information-item"},[t("span",["姓名: "]),t("span",[i.detail.user.realname?i.detail.user.realname:"--"])]),t("p",{class:"le-information-item"},[t("span",["手机号: "]),t("span",[i.detail.user.mobile?i.detail.user.mobile:"--"])]),t("p",{class:"le-information-item"},[t("span",["申请时间: "]),t("span",[i.detail.apply_time?this.$moment(new Date(1e3*i.detail.apply_time)).format("Y-MM-DD HH:mm:ss"):"--"])]),function(){if(4===i.detail.status)return t("p",{class:"le-information-item flex"},[t("span",["下线关系处理: "]),t("div",[function(){return i.detail.transfer_id?[["转移给指定分销商"],[t("el-button",{on:{click:function(){i.$router.push({path:"/promoter/index-detail/"+i.detail.transfer_id})}},class:"le-transfer",attrs:{type:"text"}},[i.detail.transfer_name])]]:"自由绑定分销商"}()])])}(),function(){if(2===i.detail.status)return t("p",{class:"le-information-item"},[t("span",["加入时间: "]),t("span",[i.detail.join_time?i.$moment(new Date(1e3*i.detail.join_time)).format("Y-MM-DD HH:mm:ss"):"--"])])}()]),t("div",{class:"le-information-three"},[t("p",{class:"le-information-item"},[t("span",["邀请方: "]),t("span",[i.detail.invite_nickname?i.detail.invite_nickname:"--"])]),function(){if(2===i.detail.status)return t("p",{class:"le-information-item"},[t("span",["分销商等级: "]),t("span",[i.detail.level_name]),t("i",{class:"le-icon le-icon-editor",on:{click:function(){return i.showModifyLevel=!0}}})])}(),t("p",{class:"le-information-item"},[t("span",["状态: "]),t("span",[2===i.detail.status?"已通过":1===i.detail.status?"待审核":3===i.detail.status?"已拒绝":4===i.detail.status||-2===i.detail.status?"已清退":""])])])])]),function(){if(2===i.detail.status)return t("div",{class:"le-card le-card-margin"},[t("div",{class:"le-card-head flex align-center"},[t("span",{class:"le-card-line"}),t("span",["下线人数"])]),t("div",{class:"flex le-offlinenumber"},[function(){if(i.detail.children.first){var e=i.detail.children.first;return t("div",{class:"flex-sub",on:{click:i.routerOfflineList.bind(i,{type:1,detail:i.detail})}},[t("div",{class:"le-total-text"},["一级下线人数"]),t("div",{class:"le-total-number"},[e.ordinary+e.promoter]),t("div",{class:"le-charts",attrs:{id:"le-offline-first"}})])}}(),function(){if(e.detail.children.second){var a=i.detail.children.second;return t("div",{class:"flex-sub",on:{click:i.routerOfflineList.bind(i,{type:2,detail:i.detail})}},[t("div",{class:"le-total-text"},["二级下线人数"]),t("div",{class:"le-total-number"},[a.ordinary+a.promoter]),t("div",{class:"le-charts",attrs:{id:"le-offline-two"}})])}}(),function(){if(e.detail.children.third){var a=i.detail.children.third;return t("div",{class:"flex-sub",on:{click:i.routerOfflineList.bind(i,{type:3,detail:i.detail})}},[t("div",{class:"le-total-text"},["三级下线人数"]),t("div",{class:"le-total-number"},[a.ordinary+a.promoter]),t("div",{class:"le-charts",attrs:{id:"le-offline-three"}})])}}()])])}(),t("div",{class:"flex le-card-margin"},[t("div",{class:"le-card le-performance"},[t("div",{class:"le-card-head flex align-center"},[t("span",{class:"le-card-line"}),t("span",["业绩统计"])]),t("div",{class:"le-total-box flex align-center flex-direction justify-center"},[t("div",{class:"le-total-text"},["累计销售额"]),t("div",{class:"le-total-number"},[3!==i.detail.status?"¥"+i.detail.sales_amount:"--"])]),t("div",{class:"le-total-box flex align-center flex-direction justify-center"},[t("div",{class:"le-total-text"},["累计邀请分销商"]),t("div",{class:"le-total-number"},[3!==i.detail.status?i.detail.invite_number:"--"])])]),t("div",{class:"le-card le-commission"},[t("div",{class:"le-card-head flex align-center"},[t("span",{class:"le-card-line"}),t("span",["佣金统计"])]),t("div",{class:"le-content flex"},[t("div",{class:"le-data flex align-center flex-direction justify-center"},[t("div",{class:"le-total-text"},["累计佣金"]),t("div",{class:"le-total-number"},[3!==i.detail.status?"¥".concat(i.detail.all_commission_amount):"--"])]),t("div",{class:"le-chart",attrs:{id:"le-commission"}})])])]),function(){if(2===i.detail.status||1===i.detail.status)return t("div",{class:"le-cardpin"},[function(){return 2===i.detail.status?t("el-button",{on:{click:function(){i.showClearOut=!0,i.clearOutInfo={UID:i.detail.UID,mobile:i.detail.user.mobile,status:i.detail.status}}}},["清退"]):1===i.detail.status?[[t("el-button",{on:{click:i.agreeRefuse.bind(i,"refuse")}},["拒绝"])],[t("el-button",{attrs:{type:"primary"},on:{click:i.agreeRefuse.bind(i,"pass")}},["通过"])]]:void 0}()])}(),function(){if(i.showClearOut)return t(p["a"],{on:{confirm:function(){i.detail.status=4}},attrs:{info:i.clearOutInfo},model:{value:i.showClearOut,callback:function(t){e.$set(i,"showClearOut",t)}}})}(),function(){if(i.showAgreeRefuse)return t(b["a"],{attrs:{type:i.agreeRefuseType,info:i.agreeRefuseInfo},model:{value:i.showAgreeRefuse,callback:function(t){e.$set(i,"showAgreeRefuse",t)}}})}(),function(){if(2===i.detail.status&&i.showModifyLevel)return t(k,c()([{attrs:{info:i.detail}},{on:Object(d["a"])({},"update:info",(function(e){i.detail=e}))},{model:{value:i.showModifyLevel,callback:function(t){e.$set(i,"showModifyLevel",t)}}}]))}()])},data:function(){return{detail:{user:{},children:{},all_commission_amount:"--",invite_number:"--"},loading:!0,showClearOut:!1,clearOutInfo:null,showAgreeRefuse:!1,agreeRefuseInfo:{},agreeRefuseType:"",showModifyLevel:!1}},mounted:function(){var e=this.$route.params.id;this.getDetail(parseInt(e))},methods:{getDetail:function(e){var t=this;this.$heshop.promoter("get",e).then((function(e){t.detail=e,t.$nextTick((function(){t.commissionEchart();var i=t.detail.status;2===i&&(t.offlineFirstEchart(),e.children.second&&t.offlineTwoEchart(),e.children.second&&t.offlineThreeEchart())})),t.loading=!1})).catch((function(e){t.$message.error(e.data.message)}))},routerBack:function(){this.$router.back(-1)},commissionEchart:function(){var e=this,t=new h("le-commission","佣金统计");setTimeout((function(){t.setOptions([{value:e.detail.wait_account,name:"待结算佣金"},{value:e.detail.commission,name:"待提现佣金"},{value:e.detail.is_withdrawal,name:"已提现佣金"}])}),500)},offlineFirstEchart:function(){var e=new h("le-offline-first","下线人数"),t=this.detail.children.first;setTimeout((function(){e.setOptions([{value:t.promoter,name:"分销商"},{value:t.ordinary,name:"普通下线"}])}),500)},offlineTwoEchart:function(){var e=new h("le-offline-two","下线人数"),t=this.detail.children.second;setTimeout((function(){e.setOptions([{value:t.promoter,name:"分销商"},{value:t.ordinary,name:"普通下线"}])}),500)},offlineThreeEchart:function(){var e=new h("le-offline-three","下线人数"),t=this.detail.children.third;setTimeout((function(){e.setOptions([{value:t.promoter,name:"分销商"},{value:t.ordinary,name:"普通下线"}])}),500)},routerOfflineList:function(e){this.$router.push({name:"promoter-index-detail-list",path:"/promoter/index-detail-list",params:e})},agreeRefuse:function(e){console.log(e),this.agreeRefuseType=e,this.showAgreeRefuse=!0,this.agreeRefuseInfo=Object(r["a"])(Object(r["a"])({},this.detail),{},{nickname:this.detail.user.nickname})}}},j=_,D=(i("7c48"),Object(x["a"])(j,n,s,!1,null,"b03877e2",null));t["default"]=D.exports},b37c:function(e,t,i){},ec5c:function(e,t,i){},f9d9:function(e,t,i){"use strict";i("ec5c")}}]);