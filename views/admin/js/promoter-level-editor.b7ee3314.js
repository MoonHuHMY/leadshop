(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["promoter-level-editor"],{"0e28":function(e,t,n){"use strict";n.d(t,"q",(function(){return l})),n.d(t,"s",(function(){return u})),n.d(t,"a",(function(){return s})),n.d(t,"K",(function(){return d})),n.d(t,"k",(function(){return f})),n.d(t,"j",(function(){return m})),n.d(t,"y",(function(){return p})),n.d(t,"w",(function(){return h})),n.d(t,"t",(function(){return v})),n.d(t,"x",(function(){return g})),n.d(t,"c",(function(){return b})),n.d(t,"u",(function(){return k})),n.d(t,"v",(function(){return w})),n.d(t,"C",(function(){return _})),n.d(t,"d",(function(){return P})),n.d(t,"i",(function(){return y})),n.d(t,"B",(function(){return x})),n.d(t,"A",(function(){return I})),n.d(t,"D",(function(){return N})),n.d(t,"e",(function(){return O})),n.d(t,"f",(function(){return A})),n.d(t,"z",(function(){return $})),n.d(t,"h",(function(){return T})),n.d(t,"E",(function(){return G})),n.d(t,"l",(function(){return C})),n.d(t,"n",(function(){return j})),n.d(t,"H",(function(){return q})),n.d(t,"m",(function(){return E})),n.d(t,"G",(function(){return L})),n.d(t,"I",(function(){return R})),n.d(t,"p",(function(){return U})),n.d(t,"b",(function(){return X})),n.d(t,"J",(function(){return z})),n.d(t,"F",(function(){return B})),n.d(t,"r",(function(){return J})),n.d(t,"g",(function(){return D})),n.d(t,"o",(function(){return K}));n("61d9"),n("877e"),n("dc87"),n("da02");var o=n("430a"),r=(n("f667"),n("e7a8"),n("e939"),["X-PAGINATION-TOTAL-COUNT","X-PAGINATION-PER-PAGE","X-PAGINATION-PAGE-COUNT","X-PAGINATION-CURRENT-PAGE"]);function a(e){Object.keys(e.headers).forEach((function(t){e.headers[t.toUpperCase()]=e.headers[t],delete e.headers[t]}));var t={current:1,pageCount:1,totalCount:1};r.forEach((function(t){Object.keys(e.headers).map((function(n){t===n&&(e.headers[n]=parseInt(e.headers[n]))}))})),t.current=e.headers["X-PAGINATION-CURRENT-PAGE"],t.pageCount=e.headers["X-PAGINATION-PAGE-COUNT"],t.totalCount=e.headers["X-PAGINATION-TOTAL-COUNT"],e.pagination=t}var i=o["default"].prototype.$heshop,c=o["default"].prototype.$message.error;function l(e){var t=e.tabKey,n=void 0===t?"all":t,o=e.page,r=void 0===o?1:o,l=e.search,u=void 0===l?"":l,s=e.sort,d=void 0===s?{}:s,f=e.time_start,m=void 0===f?0:f,p=e.time_end,h=void 0===p?0:p,v=e.cost_status,g=void 0===v?null:v,b=e.is_promoter,k=void 0===b?null:b;return new Promise((function(e){i.search("post",{include:"goods"},{keyword:{tab_key:n,search:u,sort:d,time_start:m,time_end:h,is_promoter:k,cost_status:g}}).page(r,10).then((function(t){a(t);var n=t.data,o=t.pagination;e({data:n,pagination:o})})).catch((function(e){c(e.data.message)}))}))}function u(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"",t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:[],n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"",o=arguments.length>3&&void 0!==arguments[3]?arguments[3]:null;return new Promise((function(r){i.promotergoods("put",{type:e,id:t,tab_key:n},{is_promoter:o}).then(r).catch((function(e){c(e.data.message)}))}))}function s(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return new Promise((function(t,n){i.promoter("post",e).then(t).catch((function(e){c(e.data.message),n(e)}))}))}function d(e){return new Promise((function(t,n){i.promoter("get",{behavior:"add_search",search:e}).then((function(e){t(e)})).catch((function(e){c(e.data.message),n(e)}))}))}function f(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:1,t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{keyword:"",begin_time:null,end_time:null,type:null,level:null};return new Promise((function(n){i.finance("get",t).page(e,10).then((function(e){a(e);var t=e.data,o=e.pagination;n({data:t,pagination:o})})).catch((function(e){c(e.data.message)}))}))}function m(e,t,n){return e=parseInt(e),new Promise((function(o,r){i.finance("put",e,{status:t,content:n}).then(o).catch((function(e){r(),c(e.data.message)}))}))}function p(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:1,t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return new Promise((function(n){i.search("post",{include:"promoterorder"},t).page(e,10).then((function(e){a(e);var t=e.data,o=e.pagination;n({data:t,pagination:o})})).catch((function(e){c(e.data.message)}))}))}function h(){return new Promise((function(e){i.promoterlevel("get").then(e).catch((function(e){c(e.data.message)}))}))}function v(e){return e=parseInt(e),new Promise((function(t){console.log("删除分销等级"),i.promoterlevel("delete",e).then(t).catch((function(e){c(e.data.message)}))}))}function g(){return new Promise((function(e){i.promoterlevel("get",{behavior:"option"}).then(e).catch((function(e){c(e.data.message)}))}))}function b(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return new Promise((function(t,n){i.promoterlevel("post",e).then(t).catch((function(e){c(e.data.message),n(e)}))}))}function k(e){return e=parseInt(e),new Promise((function(t){i.promoterlevel("get",e).then(t).catch((function(e){c(e.data.message)}))}))}function w(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return e=parseInt(e),new Promise((function(n,o){i.promoterlevel("put",e,t).then(n).catch((function(e){c(e.data.message),o(e)}))}))}function _(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:1,t=arguments.length>1?arguments[1]:void 0;return new Promise((function(n){i.promotermaterial("get",t).page(e,10).then((function(e){a(e);var t=e.data,o=e.pagination;n({data:t,pagination:o})})).catch((function(e){c(e.data.message)}))}))}function P(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return new Promise((function(t){i.promotermaterial("post",e).then(t).catch((function(e){c(e.data.message)}))}))}function y(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return new Promise((function(n){i.promotermaterial("put",e,t).then(n).catch((function(e){c(e.data.message)}))}))}function x(e){return new Promise((function(t){i.promotermaterial("get",e).then(t).catch((function(e){c(e.data.message)}))}))}function I(e){return new Promise((function(t){i.promotermaterial("delete",e).then(t).catch((function(e){c(e.data.message)}))}))}function N(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:1,t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return new Promise((function(n){i.promoterzone("get",t).page(e,10).then((function(e){a(e);var t=e.data,o=e.pagination;n({data:t,pagination:o})})).catch((function(e){c(e.data.message)}))}))}function O(e){return new Promise((function(t){i.promoterzone("post",e).then(t).catch((function(e){c(e.data.message)}))}))}function A(e){return new Promise((function(t){i.promoterzone("delete",e).then(t).catch((function(e){c(e.data.message)}))}))}function $(e){return e=parseInt(e),new Promise((function(t){i.promoterzone("get",e).then((function(e){console.log(e),t(e)})).catch((function(e){c(e.data.message)}))}))}function T(e,t){return e=parseInt(e),new Promise((function(n,o){i.promoterzone("put",e,t).then(n).catch((function(e){o(e),c(e.data.message)}))}))}function G(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return new Promise((function(t,n){i.setting("post",{keyword:"commission_setting",content:e}).then(t).catch((function(e){n(e)}))}))}function C(){return new Promise((function(e,t){i.search("post",{include:"setting"},{keyword:"commission_setting"}).then(e).catch((function(e){c(e.data.message),t()}))}))}function j(){return new Promise((function(e,t){i.search("post",{include:"setting"},{keyword:"promoter_setting"}).then(e).catch((function(e){c(e.data.message),t()}))}))}function q(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return new Promise((function(t,n){i.setting("post",{keyword:"promoter_setting",content:e}).then(t).catch((function(e){n(e)}))}))}function E(){return new Promise((function(e,t){i.search("post",{include:"setting"},{keyword:"promoter_rank"}).then(e).catch((function(e){c(e.data.message),t()}))}))}function L(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return new Promise((function(t,n){i.setting("post",{keyword:"promoter_rank",content:e}).then(t).catch((function(e){n(e)}))}))}function R(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return new Promise((function(t,n){i.setting("post",{keyword:"promoter_recruit_make",content:e}).then(t).catch((function(e){n(e)}))}))}function U(){return new Promise((function(e,t){i.search("post",{include:"setting"},{keyword:"promoter_recruit_make"}).then((function(t){e(t.content)})).catch((function(e){c(e.data.message),t()}))}))}function X(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"",n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};return new Promise((function(o,r){i.promoter("put",{id:e,behavior:t},n).then(o).catch((function(e){c(e.data.message),r()}))}))}function z(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{uid:"",mobile:""};return new Promise((function(t,n){i.promoter("get",{behavior:"transfer_search",from_uid:e.uid,mobile:e.mobile}).then(t).catch((function(e){c(e.data.message),n(e)}))}))}function B(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return new Promise((function(t,n){i.setting("post",{keyword:"promoter_page_setting",content:e}).then(t).catch((function(e){c(e.data.message),n(e)}))}))}function J(){return new Promise((function(e,t){i.search("post",{include:"setting"},{keyword:"promoter_page_setting"}).then((function(t){e(t.content)})).catch((function(e){c(e.data.message),t(e)}))}))}function D(e,t){return new Promise((function(n,o){i.promoter("put",parseInt(e),{level:t}).then(n).catch((function(e){c(e.data.message),o(e)}))}))}function K(e){return new Promise((function(t,n){i.qrcode("post",e).then(t).catch((function(e){c(e.data.message),n(e)}))}))}},"717a":function(e,t,n){"use strict";n.r(t);var o,r,a=n("4c02"),i=n.n(a),c=n("9d6b"),l=(n("e186"),n("60d6"),n("4aa0"),n("7e8e"),n("5d63"),n("e939"),n("e7a8"),n("d36b"),n("0e28")),u={name:"level-editor",data:function(){var e=this,t=/(^[\d]|^[1-9][\d]*)($|[\.][\d]{0,2}$)/,n=function(n,o,r){t.test(o)?(o=Number(o),o>100?r("请输入小于100的数字"):((o<=e.form.second||o<=e.form.third)&&r("一级分销佣金需大于二级分销佣金和三级分销佣金"),r())):r("请输入小数位为两位的数字")},o=function(n,o,r){t.test(o)?(o=Number(o),o>100?r("请输入小于100的数字"):(o<e.form.third&&r("二级分销佣金需大于三级分销佣金"),o>e.form.first&&r("二级分销佣金需小于一级分销佣金"),r())):r("请输入小数位为两位的数字")},r=function(n,o,r){var a=e.$_.cloneDeep(e.levelList).reverse();if(t.test(o))if(o=Number(o),o>100)r("请输入小于100的数字");else{if(e.form.level>1){var i=e.form.level,c=a.find((function(e){return e.level<i&&e.first}));if(c){var l=Number(c.first);o<=l&&r("三分销佣金需大于【".concat(c.name,"】的一级分销佣金").concat(l,"%"))}}r()}else r("请输入小数位为两位的数字")},a=function(t,n,o){var r=e.form.condition,a=[];a=Object.keys(r).map((function(e){return{key:e,value:r[e]}}));var i=a.findIndex((function(e){return e.value.checked}));i<0&&o("条件必须选一个");for(var c=0;c<a.length;c++)if(a[c].value.checked&&!a[c].value.num)return void o("值不能为空");o()};return{form:{name:"",level:null,first:"",second:"",third:"",update_type:1,is_auto:1,condition:{all_children:{checked:!1,num:null},total_bonus:{checked:!1,num:null},total_money:{checked:!1,num:null}}},levelList:[],rules:{level:[{required:!0,message:"请选择等级"}],name:[{required:!0,message:"请输入等级名称"}],first:[{required:!0,validator:n,trigger:["blur"]}],second:[{required:!0,validator:o,trigger:["blur"]}],third:[{required:!0,validator:r,trigger:["blur"]}],update_type:[{required:!0,validator:a,trigger:["change"]}]},loading:!0,disabled:!0}},mounted:function(){var e=this;return Object(c["a"])(regeneratorRuntime.mark((function t(){var n,o,r,a;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.next=2,Object(l["x"])();case 2:if(n=t.sent,e.levelList=n.list,o=e.$route.query.id,!o){t.next=12;break}return e.loading=!0,t.next=9,Object(l["u"])(o);case 9:for(r=t.sent,a=0;a<e.levelList.length;a++)e.levelList[a].disabled=e.levelList[a].level!==r.level;e.form=r;case 12:e.loading=!1,e.disabled=!1;case 14:case"end":return t.stop()}}),t)})))()},methods:{routerBack:function(){this.$router.back()},submit:function(){var e=this;return Object(c["a"])(regeneratorRuntime.mark((function t(){var n;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.prev=0,t.next=3,e.$refs["form"].validate();case 3:if(e.loading=!0,n=e.$route.query.id,n){t.next=10;break}return t.next=8,Object(l["c"])(e.form);case 8:t.next=12;break;case 10:return t.next=12,Object(l["v"])(n,e.form);case 12:e.loading=!1,e.routerBack(),t.next=19;break;case 16:t.prev=16,t.t0=t["catch"](0),e.loading=!1;case 19:case"end":return t.stop()}}),t,null,[[0,16]])})))()},selectionLevel:function(e,t){t.disabled||(this.form.level=e+1,this.form.is_auto=0!==e?1:0)}},render:function(){var e=this,t=arguments[0],n=this;return t("div",{class:"le-main"},[t("el-breadcrumb",{attrs:{"separator-class":"el-icon-arrow-right"}},[t("el-breadcrumb-item",[t("a",{on:{click:this.routerBack}},["分销等级"])]),t("el-breadcrumb-item",[n.$route.query.id?"编辑":"添加","分销商等级"])]),t("el-form",i()([{attrs:{"label-width":"193px"},directives:[{name:"loading",value:n.loading}],ref:"form"},{props:{model:n.form,rules:n.rules}}]),[t("div",{class:"le-card le-card-margin"},[t("div",{class:"le-card-head flex align-center"},[t("span",{class:"le-card-line"}),t("span",["等级信息"])]),t("div",{class:"le-card-body"},[t("el-form-item",{attrs:{label:"选择等级",prop:"level"}},[t("div",{class:"flex flex-wrap le-level--box"},[n.levelList.map((function(e,o){var r=n.form.level;return t("div",{on:{click:n.selectionLevel.bind(n,o,e)},class:[{active:o+1===r,"le-level--disabled":e.disabled},"le-level--selection"],key:o},[e.name])}))])]),t("el-form-item",{attrs:{label:"等级名称",prop:"name"}},[t("el-input",{class:"le-small--input",attrs:{placeholder:"请输入等级名称",maxlength:"8","show-word-limit":!0},model:{value:n.form.name,callback:function(t){e.$set(n.form,"name",t)}}})])])]),t("div",{class:"le-card le-card-margin"},[t("div",{class:"le-card-head flex align-center"},[t("span",{class:"le-card-line"}),t("span",["等级佣金"])]),t("div",{class:"le-card-body"},[t("el-form-item",{attrs:{label:"一级分销佣金",prop:"first"}},[t("el-input",{class:"le-small--input",model:{value:n.form.first,callback:function(t){e.$set(n.form,"first",t)}}},[t("template",{slot:"append"},["%"])])]),t("el-form-item",{attrs:{label:"二级分销佣金",prop:"second"}},[t("el-input",{class:"le-small--input",model:{value:n.form.second,callback:function(t){e.$set(n.form,"second",t)}}},[t("template",{slot:"append"},["%"])])]),t("el-form-item",{attrs:{label:"三级分销佣金",prop:"third"}},[t("el-input",{class:"le-small--input",model:{value:n.form.third,callback:function(t){e.$set(n.form,"third",t)}}},[t("template",{slot:"append"},["%"])])])])]),t("div",{class:"le-card le-card-margin"},[t("div",{class:"le-card-head flex align-center"},[t("span",{class:"le-card-line"}),t("span",["等级升级"])]),t("div",{class:"le-card-body"},[t("el-form-item",{attrs:{label:"自动升级"}},[t("el-radio-group",{attrs:{disabled:1===n.form.level},model:{value:n.form.is_auto,callback:function(t){e.$set(n.form,"is_auto",t)}}},[t("el-radio",{attrs:{label:1}},["允许自动升级"]),t("el-radio",{attrs:{label:0}},["禁止自动升级"])]),t("div",{class:"le-prompt-text"},["选择允许自动升级后，将在用户的等级中心显示等级的升级条件和佣金比例"])]),function(){if(1!==n.form.level&&1===n.form.is_auto)return t("el-form-item",{attrs:{label:"升级条件",prop:"update_type"}},[t("el-radio-group",{model:{value:n.form.update_type,callback:function(t){e.$set(n.form,"update_type",t)}}},[t("el-radio",{attrs:{label:1}},["满足以下任意条件"]),t("el-radio",{attrs:{label:2}},["满足以下全部条件"])]),t("div",[t("el-checkbox",{class:"le-condition--item",model:{value:n.form.condition.total_bonus.checked,callback:function(t){e.$set(n.form.condition.total_bonus,"checked",t)}}},[t("div",{class:"flex align-center"},[t("span",{class:"le-label"},["累计佣金"]),t("el-input",{attrs:{disabled:!n.form.condition.total_bonus.checked},model:{value:n.form.condition.total_bonus.num,callback:function(t){e.$set(n.form.condition.total_bonus,"num",t)}}},[t("template",{slot:"append"},["元"])])])]),t("el-checkbox",{class:"le-condition--item",model:{value:n.form.condition.all_children.checked,callback:function(t){e.$set(n.form.condition.all_children,"checked",t)}}},[t("div",{class:"flex align-center"},[t("span",{class:"le-label"},["当前下线数"]),t("el-input",{attrs:{disabled:!n.form.condition.all_children.checked},model:{value:n.form.condition.all_children.num,callback:function(t){e.$set(n.form.condition.all_children,"num",t)}}},[t("template",{slot:"append"},["人"])])])]),t("el-checkbox",{class:"le-condition--item",model:{value:n.form.condition.total_money.checked,callback:function(t){e.$set(n.form.condition.total_money,"checked",t)}}},[t("div",{class:"flex align-center"},[t("span",{class:"le-label"},["累计销售金额"]),t("el-input",{attrs:{disabled:!n.form.condition.total_money.checked},model:{value:n.form.condition.total_money.num,callback:function(t){e.$set(n.form.condition.total_money,"num",t)}}},[t("template",{slot:"append"},["元"])])])])])])}()])])]),t("div",{class:"le-cardpin"},[t("el-button",{attrs:{type:"primary",loading:n.loading&&!n.disabled,disabled:n.disabled},on:{click:n.submit}},["保存"])])])}},s=u,d=(n("c705"),n("cba8")),f=Object(d["a"])(s,o,r,!1,null,"74b37be5",null);t["default"]=f.exports},"7f25":function(e,t,n){},c705:function(e,t,n){"use strict";n("7f25")}}]);