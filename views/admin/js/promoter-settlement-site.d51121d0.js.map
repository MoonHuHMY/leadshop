{"version":3,"sources":["webpack:///./src/pages/promoter/helpers.js","webpack:///./src/pages/promoter/api.js","webpack:///./src/pages/promoter/settlement-site.vue?3412","webpack:///./src/pages/promoter/settlement-site.vue","webpack:///src/pages/promoter/settlement-site.vue","webpack:///./src/pages/promoter/settlement-site.vue?5bbc"],"names":["PAGE_HEADERS","transformPageHeaders","response","Object","keys","headers","forEach","item","toUpperCase","pagination","current","pageCount","totalCount","key","map","parseInt","service","Vue","prototype","$heshop","$message","goodsList","tabKey","page","Promise","resolve","search","include","keyword","tab_key","then","data","catch","error","message","financeList","finance","promoterOrderList","promoterLevelList","promoterlevel","promotermaterialList","promotermaterial","createPromotermaterial","body","promoterzoneList","promoterzone","createPromoterzone","saveCommissionSetting","content","reject","setting","getCommissionSetting","getPromoterSetting","savePromoterSetting","getPromoterRank","savePromoterRank","saveRecruitMake","getRecruitMake","staticRenderFns","name","rex","test","value","callback","form","count_rules","withdrawal_way","min_money","max_money","poundage","rules","loading","methods","submit","this","$refs","validate","valid","mounted","render","component"],"mappings":"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","file":"js/promoter-settlement-site.d51121d0.js","sourcesContent":["const PAGE_HEADERS = [\r\n  'X-PAGINATION-TOTAL-COUNT',\r\n  'X-PAGINATION-PER-PAGE',\r\n  'X-PAGINATION-PAGE-COUNT',\r\n  'X-PAGINATION-CURRENT-PAGE'\r\n];\r\n\r\nexport function transformPageHeaders(response) {\r\n  Object.keys(response.headers).forEach(item => {\r\n    response.headers[item.toUpperCase()] = response.headers[item];\r\n    delete response.headers[item];\r\n  });\r\n  const pagination = {\r\n    current: 1,\r\n    pageCount: 1,\r\n    totalCount: 1\r\n  };\r\n  PAGE_HEADERS.forEach(key => {\r\n    Object.keys(response.headers).map(item => {\r\n      if (key === item) {\r\n        response.headers[item] = parseInt(response.headers[item]);\r\n      }\r\n    });\r\n  });\r\n  pagination.current = response.headers['X-PAGINATION-CURRENT-PAGE'];\r\n  pagination.pageCount = response.headers['X-PAGINATION-PAGE-COUNT'];\r\n  pagination.totalCount = response.headers['X-PAGINATION-TOTAL-COUNT'];\r\n  response.pagination = pagination;\r\n}\r\n","import Vue from 'vue';\r\nconst service = Vue.prototype.$heshop;\r\nconst $message = Vue.prototype.$message;\r\nimport { transformPageHeaders } from './helpers.js';\r\n\r\n// 商品列表\r\nexport function goodsList({ tabKey = 'all', page = 1 }) {\r\n  return new Promise(resolve => {\r\n    service\r\n      .search(\r\n        'post',\r\n        {\r\n          include: 'goods'\r\n        },\r\n        {\r\n          keyword: {\r\n            tab_key: tabKey\r\n          }\r\n        }\r\n      )\r\n      .page(page, 10)\r\n      .then(response => {\r\n        transformPageHeaders(response);\r\n        const { data, pagination } = response;\r\n        resolve({\r\n          data: data,\r\n          pagination\r\n        });\r\n      })\r\n      .catch(error => {\r\n        $message(error.data.message);\r\n      });\r\n  });\r\n}\r\n\r\n// 提现管理列表\r\nexport function financeList(page = 1) {\r\n  return new Promise(resolve => {\r\n    service\r\n      .finance('get')\r\n      .page(page, 10)\r\n      .then(response => {\r\n        transformPageHeaders(response);\r\n        const { data, pagination } = response;\r\n        resolve({\r\n          data: data,\r\n          pagination: pagination\r\n        });\r\n      })\r\n      .catch(error => {\r\n        $message(error.data.message);\r\n      });\r\n  });\r\n}\r\n\r\n// 分销订单\r\nexport function promoterOrderList(page = 1, keyword = {}) {\r\n  return new Promise(resolve => {\r\n    service\r\n      .search(\r\n        'post',\r\n        {\r\n          include: 'promoterorder'\r\n        },\r\n        keyword\r\n      )\r\n      .page(page, 10)\r\n      .then(response => {\r\n        transformPageHeaders(response);\r\n        const { data, pagination } = response;\r\n        resolve({\r\n          data: data,\r\n          pagination: pagination\r\n        });\r\n      })\r\n      .catch(error => {\r\n        $message(error.data.message);\r\n      });\r\n  });\r\n}\r\n\r\n// 分销等级列表\r\nexport function promoterLevelList() {\r\n  return new Promise(resolve => {\r\n    service\r\n      .promoterlevel('get')\r\n      .then(response => {\r\n        resolve(response);\r\n      })\r\n      .catch(error => {\r\n        $message(error.data.message);\r\n      });\r\n  });\r\n}\r\n\r\n// 素材中心列表\r\nexport function promotermaterialList(page = 1) {\r\n  return new Promise(resolve => {\r\n    service\r\n      .promotermaterial('get')\r\n      .page(page, 10)\r\n      .then(response => {\r\n        transformPageHeaders(response);\r\n        const { data, pagination } = response;\r\n        resolve({\r\n          data: data,\r\n          pagination: pagination\r\n        });\r\n      })\r\n      .catch(error => {\r\n        $message(error.data.message);\r\n      });\r\n  });\r\n}\r\n\r\n// 添加素材\r\nexport function createPromotermaterial(body = {}) {\r\n  return new Promise(resolve => {\r\n    service\r\n      .promotermaterial('post', body)\r\n      .then(response => {\r\n        resolve(response);\r\n      })\r\n      .catch(error => {\r\n        $message(error.data.message);\r\n      });\r\n  });\r\n}\r\n\r\n// 空间动态列表\r\nexport function promoterzoneList(page = 1, keyword = {}) {\r\n  return new Promise(resolve => {\r\n    service\r\n      .promoterzone('get', keyword)\r\n      .page(page, 10)\r\n      .then(response => {\r\n        transformPageHeaders(response);\r\n        const { data, pagination } = response;\r\n        resolve({\r\n          data: data,\r\n          pagination: pagination\r\n        });\r\n      })\r\n      .catch(error => {\r\n        $message(error.data.message);\r\n      });\r\n  });\r\n}\r\n\r\n// 创建空间动态\r\nexport function createPromoterzone(body) {\r\n  return new Promise(resolve => {\r\n    service\r\n      .promoterzone('post', body)\r\n      .then(response => {\r\n        resolve(response);\r\n      })\r\n      .catch(error => {\r\n        $message(error.data.message);\r\n      });\r\n  });\r\n}\r\n\r\n// 保存结算设置\r\nexport function saveCommissionSetting(content = {}) {\r\n  return new Promise((resolve, reject) => {\r\n    service\r\n      .setting('post', {\r\n        keyword: 'commission_setting',\r\n        content: content\r\n      })\r\n      .then(response => {\r\n        resolve(response);\r\n      })\r\n      .catch(error => {\r\n        reject(error);\r\n      });\r\n  });\r\n}\r\n\r\n// 获取结算设置\r\nexport function getCommissionSetting() {\r\n  return new Promise((resolve, reject) => {\r\n    service\r\n      .search(\r\n        'post',\r\n        { include: 'setting' },\r\n        {\r\n          keyword: 'commission_setting'\r\n        }\r\n      )\r\n      .then(response => {\r\n        resolve(response);\r\n      })\r\n      .catch(error => {\r\n        $message(error.data.message);\r\n        reject();\r\n      });\r\n  });\r\n}\r\n\r\n// 获取分销设置\r\nexport function getPromoterSetting() {\r\n  return new Promise((resolve, reject) => {\r\n    service\r\n      .search(\r\n        'post',\r\n        { include: 'setting' },\r\n        {\r\n          keyword: 'promoter_setting'\r\n        }\r\n      )\r\n      .then(response => {\r\n        resolve(response);\r\n      })\r\n      .catch(error => {\r\n        $message(error.data.message);\r\n        reject();\r\n      });\r\n  });\r\n}\r\n\r\n// 保存分销设置\r\nexport function savePromoterSetting(content = {}) {\r\n  return new Promise((resolve, reject) => {\r\n    service\r\n      .setting('post', {\r\n        keyword: 'promoter_setting',\r\n        content: content\r\n      })\r\n      .then(response => {\r\n        resolve(response);\r\n      })\r\n      .catch(error => {\r\n        reject(error);\r\n      });\r\n  });\r\n}\r\n\r\n// 获取排行榜设置\r\nexport function getPromoterRank() {\r\n  return new Promise((resolve, reject) => {\r\n    service\r\n      .search(\r\n        'post',\r\n        { include: 'setting' },\r\n        {\r\n          keyword: 'promoter_rank'\r\n        }\r\n      )\r\n      .then(response => {\r\n        resolve(response);\r\n      })\r\n      .catch(error => {\r\n        $message(error.data.message);\r\n        reject();\r\n      });\r\n  });\r\n}\r\n\r\n// 保存排行榜设置\r\nexport function savePromoterRank(content = {}) {\r\n  return new Promise((resolve, reject) => {\r\n    service\r\n      .setting('post', {\r\n        keyword: 'promoter_rank',\r\n        content: content\r\n      })\r\n      .then(response => {\r\n        resolve(response);\r\n      })\r\n      .catch(error => {\r\n        reject(error);\r\n      });\r\n  });\r\n}\r\n\r\n// 设置招募令\r\nexport function saveRecruitMake(content = {}) {\r\n  return new Promise((resolve, reject) => {\r\n    service\r\n      .setting('post', {\r\n        keyword: 'promoter_recruit_make',\r\n        content: content\r\n      })\r\n      .then(response => {\r\n        resolve(response);\r\n      })\r\n      .catch(error => {\r\n        reject(error);\r\n      });\r\n  });\r\n}\r\n\r\n// 获取招募令设置\r\nexport function getRecruitMake() {\r\n  return new Promise((resolve, reject) => {\r\n    service\r\n      .search(\r\n        'post',\r\n        { include: 'setting' },\r\n        {\r\n          keyword: 'promoter_recruit_make'\r\n        }\r\n      )\r\n      .then(response => {\r\n        resolve(response.content);\r\n      })\r\n      .catch(error => {\r\n        $message(error.data.message);\r\n        reject();\r\n      });\r\n  });\r\n}\r\n","export * from \"-!../../../node_modules/_mini-css-extract-plugin@0.9.0@mini-css-extract-plugin/dist/loader.js??ref--10-oneOf-1-0!../../../node_modules/_css-loader@3.6.0@css-loader/dist/cjs.js??ref--10-oneOf-1-1!../../../node_modules/_vue-loader@15.9.6@vue-loader/lib/loaders/stylePostLoader.js!../../../node_modules/_postcss-loader@3.0.0@postcss-loader/src/index.js??ref--10-oneOf-1-2!../../../node_modules/_less-loader@5.0.0@less-loader/dist/cjs.js??ref--10-oneOf-1-3!../../../node_modules/_cache-loader@4.1.0@cache-loader/dist/cjs.js??ref--0-0!../../../node_modules/_vue-loader@15.9.6@vue-loader/lib/index.js??vue-loader-options!./settlement-site.vue?vue&type=style&index=0&id=6fce4d9a&scoped=true&lang=less&\"","var render, staticRenderFns\nimport script from \"./settlement-site.vue?vue&type=script&lang=js&\"\nexport * from \"./settlement-site.vue?vue&type=script&lang=js&\"\nimport style0 from \"./settlement-site.vue?vue&type=style&index=0&id=6fce4d9a&scoped=true&lang=less&\"\n\n\n/* normalize component */\nimport normalizer from \"!../../../node_modules/_vue-loader@15.9.6@vue-loader/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  \"6fce4d9a\",\n  null\n  \n)\n\nexport default component.exports","<script>\r\nimport { getCommissionSetting, saveCommissionSetting } from './api';\r\n\r\nexport default {\r\n  name: 'settlement-site',\r\n  data() {\r\n    const rex = /(^[\\d]|^[1-9][\\d]*)($|[\\\\.][\\d]{0,2}$)/;\r\n    const checkPrice = (rule, value, callback) => {\r\n      if (!rex.test(value)) {\r\n        callback('请输入0~9999999的整数或小数');\r\n        return;\r\n      }\r\n      if (this.$_.toSafeInteger(value) > 9999999) {\r\n        callback('请输入0~9999999的整数或小数');\r\n      }\r\n      callback();\r\n    };\r\n    return {\r\n      form: {\r\n        count_rules: 1,\r\n        withdrawal_way: [],\r\n        min_money: 1,\r\n        max_money: 1,\r\n        poundage: 1\r\n      },\r\n      rules: {\r\n        withdrawal_way: [\r\n          {\r\n            required: true,\r\n            message: '请选择提现方式'\r\n          }\r\n        ],\r\n        min_money: [\r\n          {\r\n            required: true,\r\n            validator: checkPrice\r\n          }\r\n        ],\r\n        max_money: [\r\n          {\r\n            required: true,\r\n            validator: checkPrice\r\n          }\r\n        ],\r\n        poundage: [\r\n          {\r\n            required: true,\r\n            validator: (rule, value, callback) => {\r\n              if (!rex.test(value)) {\r\n                callback('请输入0~100的整数或小数');\r\n                return;\r\n              }\r\n              if (this.$_.toSafeInteger(value) > 100) {\r\n                callback('请输入0~100的整数或小数');\r\n              }\r\n              callback();\r\n            }\r\n          }\r\n        ]\r\n      },\r\n      loading: true\r\n    };\r\n  },\r\n  methods: {\r\n    submit() {\r\n      this.$refs['form'].validate(valid => {\r\n        if (valid) {\r\n          this.loading = true;\r\n          saveCommissionSetting(this.form)\r\n            .then(() => {\r\n              this.loading = false;\r\n            })\r\n            .catch(() => {\r\n              this.loading = false;\r\n            });\r\n        } else {\r\n          return false;\r\n        }\r\n      });\r\n    }\r\n  },\r\n  mounted() {\r\n    getCommissionSetting()\r\n      .then(response => {\r\n        this.form = response.content;\r\n        this.loading = false;\r\n      })\r\n      .catch(() => {\r\n        this.loading = false;\r\n      });\r\n  },\r\n  render() {\r\n    const self = this;\r\n    const list = [\r\n      {\r\n        name: '自动到账微信零钱',\r\n        label: 'wechatDib'\r\n      },\r\n      {\r\n        name: '提现到微信',\r\n        label: 'wechat'\r\n      },\r\n      {\r\n        name: '提现到支付宝',\r\n        label: 'alipay'\r\n      },\r\n      {\r\n        name: '提现到银行卡',\r\n        label: 'bankCard'\r\n      }\r\n    ];\r\n    return (\r\n      <div class=\"le-main\">\r\n        <el-form\r\n          label-width=\"190px\"\r\n          ref=\"form\"\r\n          props={{ model: self.form, rules: self.rules }}\r\n          v-loading={self.loading}>\r\n          <div class=\"le-card\">\r\n            <div class=\"le-card-head flex align-center\">\r\n              <span class=\"le-card-line\" />\r\n              <span>佣金计算</span>\r\n            </div>\r\n            <div class=\"le-card-body\">\r\n              <el-form-item label=\"佣金计算规则\">\r\n                <el-radio-group v-model={self.form.count_rules}>\r\n                  <div class=\"le-radio-item\">\r\n                    <el-radio label={1}>以商品实付金额计算佣金</el-radio>\r\n                    <div class=\"le-prompt-text\">选择后，佣金=商品实付金额*佣金比例</div>\r\n                  </div>\r\n                  <div class=\"le-radio-item\">\r\n                    <el-radio label={2}>以商品利润计算佣金</el-radio>\r\n                    <div class=\"le-prompt-text\">选择后，佣金=商品利润*佣金比例，此种方式能保障商家不亏本</div>\r\n                  </div>\r\n                </el-radio-group>\r\n              </el-form-item>\r\n            </div>\r\n          </div>\r\n          <div class=\"le-card le-card-margin\">\r\n            <div class=\"le-card-head flex align-center\">\r\n              <span class=\"le-card-line\" />\r\n              <span>佣金提现</span>\r\n            </div>\r\n            <div class=\"le-card-body\">\r\n              <el-form-item label=\"提现方式\" prop=\"withdrawal_way\">\r\n                <el-checkbox-group v-model={self.form.withdrawal_way}>\r\n                  {list.map((item, index) => {\r\n                    return (\r\n                      <el-checkbox label={item.label} key={index}>\r\n                        {item.name}\r\n                        {(() => {\r\n                          if (item.label === 1) {\r\n                            return (\r\n                              <el-popover content=\"过售后订单收入\" placement=\"top\" trigger=\"hover\">\r\n                                <div>\r\n                                  <span>登录【商户平台】，根据</span>\r\n                                  <el-button class=\"le-popover--btn\" type=\"text\">\r\n                                    指引\r\n                                  </el-button>\r\n                                  <span>开通【企业付款到零钱】</span>\r\n                                </div>\r\n                                <span slot=\"reference\" class=\"le-icon le-icon-zhushi\" />\r\n                              </el-popover>\r\n                            );\r\n                          }\r\n                        })()}\r\n                      </el-checkbox>\r\n                    );\r\n                  })}\r\n                </el-checkbox-group>\r\n              </el-form-item>\r\n              <el-form-item label=\"最低提现金额\" prop=\"min_money\">\r\n                <el-input class=\"le-small--input\" v-model={self.form.min_money}>\r\n                  <template slot=\"append\">元</template>\r\n                </el-input>\r\n              </el-form-item>\r\n              <el-form-item label=\"每日最高提现金额\" prop=\"max_money\">\r\n                <el-input class=\"le-small--input\" v-model={self.form.max_money}>\r\n                  <template slot=\"append\">元</template>\r\n                </el-input>\r\n              </el-form-item>\r\n              <el-form-item label=\"提现手续费\" prop=\"poundage\">\r\n                <el-input class=\"le-small--input\" v-model={self.form.poundage}>\r\n                  <template slot=\"append\">%</template>\r\n                </el-input>\r\n              </el-form-item>\r\n            </div>\r\n          </div>\r\n        </el-form>\r\n        <div class=\"le-cardpin\">\r\n          <el-button type=\"primary\" loading={self.loading} onClick={self.submit}>\r\n            保存\r\n          </el-button>\r\n        </div>\r\n      </div>\r\n    );\r\n  }\r\n};\r\n</script>\r\n\r\n<style scoped lang=\"less\">\r\n@import './index.less';\r\n.le-radio-item {\r\n  margin-top: 8px;\r\n}\r\n.le-icon-zhushi {\r\n  color: #bbbfc8;\r\n}\r\n.le-popover--btn {\r\n  color: #1890ff;\r\n}\r\n.le-small--input {\r\n  width: 170px;\r\n  ::v-deep .el-input-group__append {\r\n    padding: 0 15px;\r\n  }\r\n}\r\n</style>\r\n","import mod from \"-!../../../node_modules/_cache-loader@4.1.0@cache-loader/dist/cjs.js??ref--12-0!../../../node_modules/_thread-loader@2.1.3@thread-loader/dist/cjs.js!../../../node_modules/_babel-loader@8.2.2@babel-loader/lib/index.js!../../../node_modules/_cache-loader@4.1.0@cache-loader/dist/cjs.js??ref--0-0!../../../node_modules/_vue-loader@15.9.6@vue-loader/lib/index.js??vue-loader-options!./settlement-site.vue?vue&type=script&lang=js&\"; export default mod; export * from \"-!../../../node_modules/_cache-loader@4.1.0@cache-loader/dist/cjs.js??ref--12-0!../../../node_modules/_thread-loader@2.1.3@thread-loader/dist/cjs.js!../../../node_modules/_babel-loader@8.2.2@babel-loader/lib/index.js!../../../node_modules/_cache-loader@4.1.0@cache-loader/dist/cjs.js??ref--0-0!../../../node_modules/_vue-loader@15.9.6@vue-loader/lib/index.js??vue-loader-options!./settlement-site.vue?vue&type=script&lang=js&\""],"sourceRoot":""}