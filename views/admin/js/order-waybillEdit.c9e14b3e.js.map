{"version":3,"sources":["webpack:///./src/pages/order/helper.js","webpack:///./src/pages/order/api.js","webpack:///./src/pages/order/waybill-edit.vue","webpack:///src/pages/order/waybill-edit.vue","webpack:///./src/pages/order/waybill-edit.vue?5158","webpack:///./src/pages/order/waybill-edit.vue?e7c1"],"names":["PAGE_HEADERS","transformPageHeaders","response","Object","keys","headers","forEach","item","toUpperCase","pagination","current","pageCount","totalCount","key","map","parseInt","service","Vue","prototype","$heshop","$message","waybillList","page","Promise","resolve","reject","waybill","then","data","catch","error","message","deleteWaybill","id","createWaybill","form","putWaybill","getArea","getDistrict","district","i","length","label","name","value","list","children","default","expressJson","search","include","keyword","code","is_waybill","waybillDetail","staticRenderFns","mobile","address","area","rules","companyList","loading","disabled","methods","routerBack","this","$router","back","submit","$refs","validate","valid","province","city","mounted","console","log","$route","query","render","component"],"mappings":"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","file":"js/order-waybillEdit.c9e14b3e.js","sourcesContent":["const PAGE_HEADERS = [\n  'X-PAGINATION-TOTAL-COUNT',\n  'X-PAGINATION-PER-PAGE',\n  'X-PAGINATION-PAGE-COUNT',\n  'X-PAGINATION-CURRENT-PAGE'\n];\n\nexport function transformPageHeaders(response) {\n  Object.keys(response.headers).forEach(item => {\n    response.headers[item.toUpperCase()] = response.headers[item];\n    delete response.headers[item];\n  });\n  const pagination = {\n    current: 1,\n    pageCount: 1,\n    totalCount: 1\n  };\n  PAGE_HEADERS.forEach(key => {\n    Object.keys(response.headers).map(item => {\n      if (key === item) {\n        response.headers[item] = parseInt(response.headers[item]);\n      }\n    });\n  });\n  pagination.current = response.headers['X-PAGINATION-CURRENT-PAGE'];\n  pagination.pageCount = response.headers['X-PAGINATION-PAGE-COUNT'];\n  pagination.totalCount = response.headers['X-PAGINATION-TOTAL-COUNT'];\n  response.pagination = pagination;\n}\n","import Vue from 'vue';\nimport { transformPageHeaders } from './helper.js';\nconst service = Vue.prototype.$heshop;\nconst $message = Vue.prototype.$message;\n\n// 电子面单列表\nexport function waybillList(page = 1) {\n  return new Promise((resolve, reject) => {\n    service\n      .waybill('get')\n      .page(page, 5)\n      .then(response => {\n        transformPageHeaders(response);\n        const { data, pagination } = response;\n        resolve({\n          data: data,\n          pagination\n        });\n      })\n      .catch(error => {\n        reject(error);\n        $message(error.data.message);\n      });\n  });\n}\n\n// 删除电子面单\nexport function deleteWaybill(id) {\n  return new Promise(resolve => {\n    service\n      .waybill('delete', id)\n      .then(response => {\n        resolve(response);\n      })\n      .catch(error => {\n        $message(error.data.message);\n      });\n  });\n}\n\n// 新建电子面单\nexport function createWaybill(form = {}) {\n  return new Promise(resolve => {\n    service\n      .waybill('post', form)\n      .then(response => {\n        resolve(response);\n      })\n      .catch(error => {\n        $message(error.data.message);\n      });\n  });\n}\n\n// 更新电子面单\nexport function putWaybill(form = {}) {\n  return new Promise(resolve => {\n    service\n      .waybill('put', form)\n      .then(response => {\n        resolve(response);\n      })\n      .catch(error => {\n        $message(error.data.message);\n      });\n  });\n}\n\n// 获取地区\nexport function getArea() {\n  function getDistrict(district) {\n    for (let i = 0; i < district.length; i++) {\n      district[i].label = district[i].name;\n      district[i].value = district[i].name;\n      if (district[i].list) {\n        district[i].children = district[i].list;\n        getDistrict(district[i].children);\n      }\n    }\n  }\n  return new Promise(resolve => {\n    import('./components/district.json').then(response => {\n      getDistrict(response.default);\n      resolve(response.default);\n    });\n  });\n}\n\n// 获取物流公司列表\nexport function expressJson() {\n  return new Promise(resolve => {\n    service\n      .search('post', { include: 'setting' }, { keyword: 'expressjson' })\n      .then(response => {\n        response = response.map(item => {\n          return { value: item.name, label: item.code, is_waybill: item.is_waybill };\n        });\n        resolve(response);\n      })\n      .catch(error => {\n        $message(error.data.message);\n      });\n  });\n}\n\n// 获取电子面单详情\nexport function waybillDetail(id) {\n  return new Promise(resolve => {\n    service\n      .waybill('get', id)\n      .then(response => {\n        resolve(response);\n      })\n      .catch(error => {\n        $message(error.data.message);\n      });\n  });\n}\n","var render, staticRenderFns\nimport script from \"./waybill-edit.vue?vue&type=script&lang=js&\"\nexport * from \"./waybill-edit.vue?vue&type=script&lang=js&\"\nimport style0 from \"./waybill-edit.vue?vue&type=style&index=0&id=1be0c741&scoped=true&lang=less&\"\n\n\n/* normalize component */\nimport normalizer from \"!../../../node_modules/_vue-loader@15.9.6@vue-loader/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  \"1be0c741\",\n  null\n  \n)\n\nexport default component.exports","<script>\nimport { createWaybill, expressJson, getArea, putWaybill, waybillDetail } from './api';\n\nexport default {\n  name: 'waybill-edit',\n  data() {\n    return {\n      form: {\n        mobile: '',\n        name: '',\n        address: '',\n        code: '',\n        area: []\n      },\n      rules: {\n        area: [\n          {\n            required: true,\n            message: '发货地区不能为空'\n          }\n        ],\n        name: [\n          {\n            required: true,\n            message: '姓名不能为空'\n          }\n        ],\n        mobile: [\n          {\n            required: true,\n            message: '联系方式不能为空'\n          }\n        ],\n        address: [\n          {\n            required: true,\n            message: '发货详细地址不能为空'\n          }\n        ],\n        code: [\n          {\n            required: true,\n            message: '快递公司不能为空'\n          }\n        ]\n      },\n      district: [],\n      companyList: [],\n      loading: false,\n      disabled: false\n    };\n  },\n  methods: {\n    routerBack() {\n      this.$router.back(-1);\n    },\n    submit() {\n      this.$refs['form'].validate(valid => {\n        if (valid) {\n          this.loading = true;\n          let form = this.$_.cloneDeep(this.form);\n          form.province = form.area[0];\n          form.city = form.area[1];\n          form.district = form.area[2];\n          delete form.area;\n          if (!this.$route.query.id) {\n            createWaybill(form).then(() => {\n              this.routerBack();\n              this.loading = false;\n            });\n          } else {\n            putWaybill(form).then(() => {\n              this.routerBack();\n              this.loading = false;\n            });\n          }\n        }\n      });\n    }\n  },\n  mounted() {\n    getArea().then(response => {\n      this.district = response;\n    });\n    expressJson().then(response => {\n      console.log(response);\n      this.companyList = response.filter(item => {\n        if (item.is_waybill) {\n          return item;\n        }\n      });\n      console.log(this.companyList);\n    });\n    if (this.$route.query.id) {\n      this.loading = true;\n      this.disabled = true;\n      waybillDetail(this.$route.query.id).then(response => {\n        this.form = response;\n        this.form.area = [response.province, response.city, response.district];\n        this.loading = false;\n        this.disabled = false;\n      });\n    }\n  },\n  render() {\n    const self = this;\n    return (\n      <div class=\"le-main\">\n        <el-breadcrumb separator-class=\"el-icon-arrow-right\" class=\"he-link-text\">\n          <el-breadcrumb-item class=\"he-link\">\n            <a onClick={self.routerBack}> 电子面单</a>\n          </el-breadcrumb-item>\n          <el-breadcrumb-item>\n            {(() => {\n              return self.$route.query.id ? '编辑' : '新增';\n            })()}\n            电子面单\n          </el-breadcrumb-item>\n        </el-breadcrumb>\n        <el-form\n          label-width=\"193px\"\n          ref=\"form\"\n          v-loading={self.loading}\n          props={{\n            rules: self.rules,\n            model: self.form\n          }}>\n          <div class=\"le-card\">\n            <div class=\"le-card--head flex align-center\">\n              <span class=\"le-sign\" />\n              <span>快递公司</span>\n            </div>\n            <el-form-item label=\"快递公司\" prop=\"code\">\n              <el-select v-model={self.form.code} placeholder=\"请选择快递公司\">\n                {self.companyList.map((item, index) => {\n                  return <el-option key={index} label={item.value} value={item.label}></el-option>;\n                })}\n              </el-select>\n            </el-form-item>\n          </div>\n          <div class=\"le-card\">\n            <div class=\"le-card--head flex align-center\">\n              <span class=\"le-sign\" />\n              <span>发货人信息</span>\n            </div>\n            <el-form-item label=\"姓名\" prop=\"name\">\n              <el-input placeholder=\"请输入姓名\" v-model={self.form.name} />\n            </el-form-item>\n            <el-form-item label=\"联系方式\" prop=\"mobile\">\n              <el-input placeholder=\"请输入联系方式\" v-model={self.form.mobile} />\n            </el-form-item>\n            <el-form-item label=\"发货地区\" prop=\"area\">\n              <el-cascader\n                options={self.district}\n                v-model={self.form.area}\n                placeholder=\"请选择发货地区\"\n                props={{ expandTrigger: 'hover' }}\n              />\n            </el-form-item>\n            <el-form-item label=\"发货详细地址\" prop=\"address\">\n              <el-input placeholder=\"请输入发货详细地址\" v-model={self.form.address} />\n            </el-form-item>\n          </div>\n        </el-form>\n        <div class=\"le-cardpin\">\n          <el-button\n            type=\"primary\"\n            disabled={self.disabled}\n            loading={self.loading && !self.disabled}\n            onClick={self.submit}>\n            保存\n          </el-button>\n        </div>\n      </div>\n    );\n  }\n};\n</script>\n\n<style scoped lang=\"less\">\n.le-card {\n  margin-top: 24px;\n}\n</style>\n","import mod from \"-!../../../node_modules/_cache-loader@4.1.0@cache-loader/dist/cjs.js??ref--12-0!../../../node_modules/_thread-loader@2.1.3@thread-loader/dist/cjs.js!../../../node_modules/_babel-loader@8.2.2@babel-loader/lib/index.js!../../../node_modules/_cache-loader@4.1.0@cache-loader/dist/cjs.js??ref--0-0!../../../node_modules/_vue-loader@15.9.6@vue-loader/lib/index.js??vue-loader-options!./waybill-edit.vue?vue&type=script&lang=js&\"; export default mod; export * from \"-!../../../node_modules/_cache-loader@4.1.0@cache-loader/dist/cjs.js??ref--12-0!../../../node_modules/_thread-loader@2.1.3@thread-loader/dist/cjs.js!../../../node_modules/_babel-loader@8.2.2@babel-loader/lib/index.js!../../../node_modules/_cache-loader@4.1.0@cache-loader/dist/cjs.js??ref--0-0!../../../node_modules/_vue-loader@15.9.6@vue-loader/lib/index.js??vue-loader-options!./waybill-edit.vue?vue&type=script&lang=js&\"","export * from \"-!../../../node_modules/_mini-css-extract-plugin@0.9.0@mini-css-extract-plugin/dist/loader.js??ref--10-oneOf-1-0!../../../node_modules/_css-loader@3.6.0@css-loader/dist/cjs.js??ref--10-oneOf-1-1!../../../node_modules/_vue-loader@15.9.6@vue-loader/lib/loaders/stylePostLoader.js!../../../node_modules/_postcss-loader@3.0.0@postcss-loader/src/index.js??ref--10-oneOf-1-2!../../../node_modules/_less-loader@5.0.0@less-loader/dist/cjs.js??ref--10-oneOf-1-3!../../../node_modules/_cache-loader@4.1.0@cache-loader/dist/cjs.js??ref--0-0!../../../node_modules/_vue-loader@15.9.6@vue-loader/lib/index.js??vue-loader-options!./waybill-edit.vue?vue&type=style&index=0&id=1be0c741&scoped=true&lang=less&\""],"sourceRoot":""}