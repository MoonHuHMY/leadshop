{"version":3,"sources":["webpack:///./src/pages/order/waybill.vue?f053","webpack:///./src/pages/order/helper.js","webpack:///./src/pages/order/api.js","webpack:///./src/pages/order/waybill.vue","webpack:///src/pages/order/waybill.vue","webpack:///./src/pages/order/waybill.vue?12f6"],"names":["PAGE_HEADERS","transformPageHeaders","response","Object","keys","headers","forEach","item","toUpperCase","pagination","current","pageCount","totalCount","key","map","parseInt","service","Vue","prototype","$heshop","$message","waybillList","page","Promise","resolve","reject","waybill","then","data","catch","error","message","deleteWaybill","id","createWaybill","form","putWaybill","getArea","getDistrict","district","i","length","label","name","value","list","children","default","expressJson","search","include","keyword","code","is_waybill","waybillDetail","staticRenderFns","methods","getWaybillList","deleteBill","this","$confirm","editBill","$router","push","path","query","routerWaybillEdit","switchPage","number","openTutorials","mounted","render","component"],"mappings":"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","file":"js/order-waybill.c93bc5aa.js","sourcesContent":["export * from \"-!../../../node_modules/_mini-css-extract-plugin@0.9.0@mini-css-extract-plugin/dist/loader.js??ref--10-oneOf-1-0!../../../node_modules/_css-loader@3.6.0@css-loader/dist/cjs.js??ref--10-oneOf-1-1!../../../node_modules/_vue-loader@15.9.6@vue-loader/lib/loaders/stylePostLoader.js!../../../node_modules/_postcss-loader@3.0.0@postcss-loader/src/index.js??ref--10-oneOf-1-2!../../../node_modules/_less-loader@5.0.0@less-loader/dist/cjs.js??ref--10-oneOf-1-3!../../../node_modules/_cache-loader@4.1.0@cache-loader/dist/cjs.js??ref--0-0!../../../node_modules/_vue-loader@15.9.6@vue-loader/lib/index.js??vue-loader-options!./waybill.vue?vue&type=style&index=0&id=f4a97aa2&scoped=true&lang=less&\"","const PAGE_HEADERS = [\n  'X-PAGINATION-TOTAL-COUNT',\n  'X-PAGINATION-PER-PAGE',\n  'X-PAGINATION-PAGE-COUNT',\n  'X-PAGINATION-CURRENT-PAGE'\n];\n\nexport function transformPageHeaders(response) {\n  Object.keys(response.headers).forEach(item => {\n    response.headers[item.toUpperCase()] = response.headers[item];\n    delete response.headers[item];\n  });\n  const pagination = {\n    current: 1,\n    pageCount: 1,\n    totalCount: 1\n  };\n  PAGE_HEADERS.forEach(key => {\n    Object.keys(response.headers).map(item => {\n      if (key === item) {\n        response.headers[item] = parseInt(response.headers[item]);\n      }\n    });\n  });\n  pagination.current = response.headers['X-PAGINATION-CURRENT-PAGE'];\n  pagination.pageCount = response.headers['X-PAGINATION-PAGE-COUNT'];\n  pagination.totalCount = response.headers['X-PAGINATION-TOTAL-COUNT'];\n  response.pagination = pagination;\n}\n","import Vue from 'vue';\nimport { transformPageHeaders } from './helper.js';\nconst service = Vue.prototype.$heshop;\nconst $message = Vue.prototype.$message;\n\n// 电子面单列表\nexport function waybillList(page = 1) {\n  return new Promise((resolve, reject) => {\n    service\n      .waybill('get')\n      .page(page, 5)\n      .then(response => {\n        transformPageHeaders(response);\n        const { data, pagination } = response;\n        resolve({\n          data: data,\n          pagination\n        });\n      })\n      .catch(error => {\n        reject(error);\n        $message(error.data.message);\n      });\n  });\n}\n\n// 删除电子面单\nexport function deleteWaybill(id) {\n  return new Promise(resolve => {\n    service\n      .waybill('delete', id)\n      .then(response => {\n        resolve(response);\n      })\n      .catch(error => {\n        $message(error.data.message);\n      });\n  });\n}\n\n// 新建电子面单\nexport function createWaybill(form = {}) {\n  return new Promise(resolve => {\n    service\n      .waybill('post', form)\n      .then(response => {\n        resolve(response);\n      })\n      .catch(error => {\n        $message(error.data.message);\n      });\n  });\n}\n\n// 更新电子面单\nexport function putWaybill(form = {}) {\n  return new Promise(resolve => {\n    service\n      .waybill('put', form)\n      .then(response => {\n        resolve(response);\n      })\n      .catch(error => {\n        $message(error.data.message);\n      });\n  });\n}\n\n// 获取地区\nexport function getArea() {\n  function getDistrict(district) {\n    for (let i = 0; i < district.length; i++) {\n      district[i].label = district[i].name;\n      district[i].value = district[i].name;\n      if (district[i].list) {\n        district[i].children = district[i].list;\n        getDistrict(district[i].children);\n      }\n    }\n  }\n  return new Promise(resolve => {\n    import('./components/district.json').then(response => {\n      getDistrict(response.default);\n      resolve(response.default);\n    });\n  });\n}\n\n// 获取物流公司列表\nexport function expressJson() {\n  return new Promise(resolve => {\n    service\n      .search('post', { include: 'setting' }, { keyword: 'expressjson' })\n      .then(response => {\n        response = response.map(item => {\n          return { value: item.name, label: item.code, is_waybill: item.is_waybill };\n        });\n        resolve(response);\n      })\n      .catch(error => {\n        $message(error.data.message);\n      });\n  });\n}\n\n// 获取电子面单详情\nexport function waybillDetail(id) {\n  return new Promise(resolve => {\n    service\n      .waybill('get', id)\n      .then(response => {\n        resolve(response);\n      })\n      .catch(error => {\n        $message(error.data.message);\n      });\n  });\n}\n","var render, staticRenderFns\nimport script from \"./waybill.vue?vue&type=script&lang=js&\"\nexport * from \"./waybill.vue?vue&type=script&lang=js&\"\nimport style0 from \"./waybill.vue?vue&type=style&index=0&id=f4a97aa2&scoped=true&lang=less&\"\n\n\n/* normalize component */\nimport normalizer from \"!../../../node_modules/_vue-loader@15.9.6@vue-loader/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  \"f4a97aa2\",\n  null\n  \n)\n\nexport default component.exports","<script>\nimport { deleteWaybill, waybillList } from './api.js';\n\nexport default {\n  name: 'waybill',\n  data() {\n    return {\n      list: [],\n      pagination: {\n        current: 1,\n        pageCount: 1\n      }\n    };\n  },\n  methods: {\n    getWaybillList() {\n      waybillList(this.pagination.current).then(response => {\n        this.list = response.data;\n        this.pagination = response.pagination;\n      });\n    },\n    deleteBill(item, index) {\n      this.$confirm('发货信息删除请谨慎操作，确定删除？', '提示')\n        .then(() => {\n          deleteWaybill(item.id).then(() => {\n            console.log('1');\n            this.$delete(this.list, index);\n            console.log(this.list);\n            console.log(this.pagination);\n            if (this.list.length === 0) {\n              if (this.pagination.current > 1) {\n                this.pagination.current -= 1;\n                this.getWaybillList();\n              }\n            }\n          });\n        })\n        .catch(() => {\n          // Don't do\n        });\n    },\n    editBill(item) {\n      this.$router.push({\n        path: '/order/waybill-edit',\n        query: {\n          id: item.id\n        }\n      });\n    },\n    routerWaybillEdit() {\n      this.$router.push({\n        path: '/order/waybill-edit'\n      });\n    },\n    switchPage(number) {\n      this.pagination.current = number;\n      this.getWaybillList();\n    },\n    openTutorials() {\n      this.$confirm('电子面单使用教程', {\n        message: '<div>123</div>'\n      });\n    }\n  },\n  mounted() {\n    this.getWaybillList();\n  },\n  render() {\n    const self = this;\n    return (\n      <div class=\"le-main\">\n        <div class=\"le-prompt\">\n          温馨提示：如需打印电子面单，请安装云打印。\n          <el-button\n            onClick={() => {\n              window.open('https://kbydy.cn/CloudPrint/intro');\n            }}\n            type=\"text\">\n            安装教程\n          </el-button>\n          <br />\n          温馨提示：必看\n          <el-button\n            type=\"text\"\n            {...{\n              directives: [\n                {\n                  name: 'popup',\n                  modifiers: {\n                    waybillTutorials: true\n                  }\n                }\n              ]\n            }}\n            width=\"680\"\n            hide_cancel={true}\n            title=\"电子面单使用教程\"\n            module=\"order\">\n            《电子面单使用教程》\n          </el-button>\n          <br />\n          当前支持电子面单的快递公司：申通快递、中通快递、圆通快递、韵达快递、百世快递、德邦、EMS、邮政快递包裹、优速快递、速尔快递、丰网速运、众邮快递、品骏、京广快递、极兔速递、顺丰速运\n        </div>\n        <el-button type=\"primary\" onClick={self.routerWaybillEdit}>\n          新增发货信息\n        </el-button>\n        <div class=\"le-card le-table\">\n          <el-table data={self.list} cell-class-name=\"le-table-row\" header-row-class-name=\"le-table-header\">\n            <el-table-column label=\"快递公司\" prop=\"company_name\" />\n            <el-table-column\n              label=\"发货人信息\"\n              scopedSlots={{\n                default: scope => {\n                  const { name, mobile, province, city, district, address } = scope.row;\n                  return [\n                    [<div>姓名： {name}</div>],\n                    [<div>联系方式：{mobile}</div>],\n                    [\n                      <div>\n                        地址：{province}\n                        {city}\n                        {district}\n                        {address}\n                      </div>\n                    ]\n                  ];\n                }\n              }}\n            />\n            <el-table-column\n              label=\"操作\"\n              scopedSlots={{\n                default: scope => {\n                  return (\n                    <div class=\"le-table--operating flex align-center\">\n                      <el-button type=\"text\" onClick={self.editBill.bind(self, scope.row)}>\n                        编辑\n                      </el-button>\n                      <span class=\"le-operating--line\" />\n                      <el-button type=\"text\" onClick={self.deleteBill.bind(self, scope.row, scope.$index)}>\n                        删除\n                      </el-button>\n                    </div>\n                  );\n                }\n              }}\n            />\n          </el-table>\n          <div class=\"le-pagination flex justify-end\">\n            <el-pagination\n              background={true}\n              current-page={self.pagination.current}\n              page-count={self.pagination.pageCount}\n              on-current-change={self.switchPage}\n              layout=\"prev, pager, next, jumper\"\n            />\n          </div>\n        </div>\n      </div>\n    );\n  }\n};\n</script>\n\n<style scoped lang=\"less\">\n.le-prompt {\n  padding: 15px 24px 15px 24px;\n  background: #fff5d1;\n  border-radius: 8px;\n  font-size: 12px;\n  font-family: Microsoft YaHei;\n  font-weight: 400;\n  color: #595959;\n  line-height: 18px;\n  margin-bottom: 24px;\n  .el-button {\n    padding: 0;\n  }\n}\n.le-card {\n  margin-top: 24px;\n}\n.le-table::v-deep {\n  .le-table-row {\n    height: 92px;\n    font-size: 14px;\n    font-family: Microsoft YaHei;\n    font-weight: 400;\n    color: #262626;\n    line-height: 20px;\n    .cell {\n      padding-left: 10px;\n    }\n  }\n}\n.le-table--operating {\n  .el-button--text:first-child {\n    padding-left: 0;\n  }\n}\n</style>\n","import mod from \"-!../../../node_modules/_cache-loader@4.1.0@cache-loader/dist/cjs.js??ref--12-0!../../../node_modules/_thread-loader@2.1.3@thread-loader/dist/cjs.js!../../../node_modules/_babel-loader@8.2.2@babel-loader/lib/index.js!../../../node_modules/_cache-loader@4.1.0@cache-loader/dist/cjs.js??ref--0-0!../../../node_modules/_vue-loader@15.9.6@vue-loader/lib/index.js??vue-loader-options!./waybill.vue?vue&type=script&lang=js&\"; export default mod; export * from \"-!../../../node_modules/_cache-loader@4.1.0@cache-loader/dist/cjs.js??ref--12-0!../../../node_modules/_thread-loader@2.1.3@thread-loader/dist/cjs.js!../../../node_modules/_babel-loader@8.2.2@babel-loader/lib/index.js!../../../node_modules/_cache-loader@4.1.0@cache-loader/dist/cjs.js??ref--0-0!../../../node_modules/_vue-loader@15.9.6@vue-loader/lib/index.js??vue-loader-options!./waybill.vue?vue&type=script&lang=js&\""],"sourceRoot":""}