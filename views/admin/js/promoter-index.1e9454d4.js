(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["promoter-index"],{"548c":function(e,t,a){},5974:function(e,t,a){"use strict";a("548c")},8236:function(e,t,a){"use strict";a("2769"),a("0756"),a("6afd"),a("2070");t["a"]={data:function(){},methods:{replaceQuery:function(){var e=Object.assign({},this.$route.query,this.form);this.$router.replace({query:e})},getQuery:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:["page"],t=this.$route.query;return Object.keys(t).forEach((function(a){for(var r=0;r<e.length;r++)e[r]===a&&(isNaN(t[a])?t[a]=1:t[a]=parseInt(t[a]))})),Object.assign(this.form,t)},emptyStatus:function(){this.$router.replace({query:{}})}},filters:{}}},"86c3":function(e,t,a){"use strict";a.r(t);var r,l,o=a("357a"),s=a("7e2d"),i=a("4c02"),n=a.n(i),c=(a("2769"),a("ecf1"),a("eb62"),a("f5bd"),a("3f7e"),a("f49b"),a("8236")),u={mixins:[c["a"]],data:function(){return{form:{source:"",level:0,state:1,apply_time:[],join_time:[],search:"",page:1,invite:"",sort:{apply_time:"DESC"}},page:{size:20},levelList:[],list:[]}},render:function(){var e=this,t=arguments[0],a=this;return t("div",{class:"le-main"},[t("el-button",{attrs:{type:"primary"}},["添加分销商"]),t("el-form",n()([{},{props:{model:a.form}},{class:"le-card",attrs:{inline:!0,"label-width":"125px"}}]),[t("el-form-item",{attrs:{label:"分销商搜索"}},[t("el-input",{attrs:{value:a.form.search,placeholder:"输入ID/昵称/姓名/手机号搜索"},on:{input:function(e){a.form.search=e}},model:{value:a.form.search,callback:function(t){e.$set(a.form,"search",t)}}})]),t("el-form-item",{attrs:{label:"邀请方搜索"}},[t("el-input",{attrs:{value:a.form.invite,placeholder:"输入昵称搜索"},on:{input:function(e){a.form.invite=e}}})]),t("el-form-item",{attrs:{label:"分销商等级"}},[t("el-select",{attrs:{placeholder:"请选择"},model:{value:a.form.level,callback:function(t){e.$set(a.form,"level",t)}}},[t("el-option",{attrs:{label:"全部",value:0}}),a.levelList.map((function(e,a){return t("el-option",{key:a,attrs:{label:e.name,value:e.level}})}))])]),t("el-form-item",{attrs:{label:"用户来源"}},[t("el-select",{attrs:{placeholder:"请选择"},model:{value:a.form.source,callback:function(t){e.$set(a.form,"source",t)}}},[t("el-option",{attrs:{label:"全部",value:""}}),t("el-option",{attrs:{label:"微信小程序",value:"weapp"}}),t("el-option",{attrs:{label:"公众号",value:"wechat"}})])]),t("el-form-item",{attrs:{label:"状态"}},[t("el-select",{attrs:{placeholder:"请选择"},model:{value:a.form.state,callback:function(t){e.$set(a.form,"state",t)}}},[t("el-option",{attrs:{label:"全部",value:1}}),t("el-option",{attrs:{label:"待审核",value:2}}),t("el-option",{attrs:{label:"已通过",value:3}}),t("el-option",{attrs:{label:"已拒绝",value:4}}),t("el-option",{attrs:{label:"已清退",value:5}})])]),t("el-form-item",{attrs:{label:"申请时间"}},[t("el-date-picker",{attrs:{size:"small",type:"datetimerange","range-separator":"至","start-placeholder":"开始日期","end-placeholder":"结束日期"},model:{value:a.form.apply_time,callback:function(t){e.$set(a.form,"apply_time",t)}}})]),t("el-form-item",{attrs:{label:"加入时间"}},[t("el-date-picker",{attrs:{size:"small",type:"datetimerange","range-separator":"至","start-placeholder":"开始日期","end-placeholder":"结束日期"},model:{value:a.form.join_time,callback:function(t){e.$set(a.form,"join_time",t)}}})]),t("div",{class:"le-button"},[t("el-button",{attrs:{type:"primary"},on:{click:a.filter}},["筛选"]),t("el-button",{on:{click:a.empty}},["清空"])])]),t("div",{class:"le-card le-table"},[t("el-table",n()([{attrs:{height:"650"},on:Object(s["a"])({},{"sort-change":a.sortList})},{props:{data:this.list}},{attrs:{"default-sort":{prop:"apply_time",order:"descending"},"row-class-name":"le-table-row"}}]),[t("el-table-column",{attrs:{label:"基本信息",width:"288px",fixed:"left"},scopedSlots:{default:function(e){return t("div",{attrs:{"slot-scope":"scope"},class:"flex"},[t("div",[t("el-avatar",{attrs:{size:48,error:function(){return!0}}},[t("img",{attrs:{src:e.row.avatar}})])]),t("div",{class:"le-usercontent"},[t("div",{class:"le-user"},[t("i",{class:"le-icon le-icon-".concat("weapp"==e.row.type?"xiaochengxu":"wehcat")}),t("span",{class:"le-username"},[e.row.nickname])]),t("div",{class:"le-userinfor"},["ID:",e.row.UID,t("br"),e.row.realname,t("br"),e.row.mobile])])])}}}),t("el-table-column",{attrs:{label:"分销商等级"},scopedSlots:{default:function(e){return e.row.level_name}}}),t("el-table-column",{attrs:{label:"邀请方"},scopedSlots:{default:function(e){return e.row.invite_nickname?e.row.invite_nickname:"--"}}}),t("el-table-column",{attrs:{label:"累计销售金额(元)",sortable:"custom","min-width":"140px",prop:"sales_amount"},scopedSlots:{default:function(e){return 2===e.row.status?e.row.sales_amount:"--"}}}),t("el-table-column",{attrs:{label:"累计佣金(元)",sortable:"custom",prop:"commission_amount","min-width":"120px"},scopedSlots:{default:function(e){return 2===e.row.status?e.row.all_commission_amount:"--"}}}),t("el-table-column",{attrs:{label:"当前下线数",prop:"all_children",sortable:"custom","min-width":"120px"},scopedSlots:{default:function(e){return 2===e.row.status?e.row.all_children:"--"}}}),t("el-table-column",{attrs:{label:"累计邀请分销商",sortable:"custom",prop:"invite_number","min-width":"130px"},scopedSlots:{default:function(e){return 2===e.row.status?e.row.invite_number:"--"}}}),t("el-table-column",{attrs:{label:"状态","min-width":"100px"},scopedSlots:{default:function(e){var a=e.row.status;return t("el-tag",{attrs:{effect:"plain",size:"medium",type:2===a?"success":1===a?"warning":3===a?"danger":4===a?"info":""}},[2===a?"已通过":1===a?"待审核":3===a?"已拒绝":4===a?"已清退":""])}}}),t("el-table-column",{attrs:{label:"时间",sortable:"custom",prop:"apply_time","min-width":"180px"},scopedSlots:{default:function(e){var r=e.row.apply_time?a.$moment(new Date(1e3*e.row.apply_time)).format("Y-MM-DD HH:mm:ss"):"--",l=e.row.join_time?a.$moment(new Date(1e3*e.row.join_time)).format("Y-MM-DD HH:mm:ss"):"--";return t("span",["申请：",r,t("br"),"加入：",l])}}}),t("el-table-column",{attrs:{label:"操作","min-width":"220px"},scopedSlots:{default:function(e){return t("div",{class:"le-table-operate flex align-center"},[t("el-button",{attrs:{type:"text"},on:{click:a.routerDetail.bind(a,e.row.UID)}},["详情"]),function(){return 2===e.row.status?[[t("span",{class:"le-line"})],[t("el-button",{attrs:{type:"text"}},["清退"])]]:1===e.row.status?[[t("span",{class:"le-line"})],[t("el-button",{attrs:{type:"text"}},["通过"])],[t("span",{class:"le-line"})],[t("el-button",{attrs:{type:"text"}},["拒绝"])]]:void 0}()])}}})]),t("div",{class:"flex le-pagination justify-end"},[t("el-pagination",{attrs:{background:!0,"current-page":a.form.page,layout:"prev, pager, next, jumper","page-count":a.page.count},on:{"current-change":a.switchPage}})])])])},mounted:function(){this.form=Object.assign({},this.form,this.$route.query),this.form.page=this.getParseInt(this.form.page),this.form.state=this.getParseInt(this.form.state),this.form.grade=this.getParseInt(this.form.grade),this.getLevel(),this.getList()},methods:{routerDetail:function(e){this.$router.push({path:"/promoter/index-detail?id="+e})},switchPage:function(e){this.form.page=e,this.replaceQuery(),this.getList()},filter:function(){this.getList(),this.replaceQuery()},empty:function(){this.form={source:"",grade:0,state:1,apply_time:[],join_time:[],search:"",page:1,invite:"",sort:this.form.sort},this.filter()},getParseInt:function(e){return isNaN(e)?0:parseInt(e)},sortList:function(e){this.form.sort=Object(o["a"])({},e.prop,"descending"==e.order?"DESC":"ASC"),this.getList(),this.replaceQuery()},getList:function(){var e=this,t=JSON.parse(JSON.stringify(this.form));t["apply_time_start"]=t.apply_time[0]?Date.parse(t.apply_time[0])/1e3:0,t["apply_time_end"]=t.apply_time[1]?Date.parse(t.apply_time[1])/1e3:0,t["join_time_start"]=t.join_time[0]?Date.parse(t.join_time[0])/1e3:0,t["join_time_end"]=t.join_time[1]?Date.parse(t.join_time[1])/1e3:0,this.$heshop.search("post",{include:"promoter"},{keyword:t}).page(this.form.page,this.page.size).then((function(t){var a=t.data,r=t.headers;e.list=a,e.form.page=+r["x-pagination-current-page"],e.page={count:+r["x-pagination-page-count"],size:+r["x-pagination-per-page"],total:+r["x-pagination-total-count"]}})).catch((function(t){e.$message.error(t.data.message)}))},getLevel:function(){var e=this;this.$heshop.promoterlevel("get").then((function(t){e.levelList=t})).catch((function(t){e.$message.error(t.data.message)}))}}},p=u,m=(a("5974"),a("5d22")),f=Object(m["a"])(p,r,l,!1,null,"6e12445d",null);t["default"]=f.exports}}]);
//# sourceMappingURL=promoter-index.1e9454d4.js.map