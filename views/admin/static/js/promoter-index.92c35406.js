(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["promoter-index"],{"01a0":function(e,t,n){},"0e28":function(e,t,n){"use strict";n.d(t,"i",(function(){return l})),n.d(t,"d",(function(){return c})),n.d(t,"k",(function(){return u})),n.d(t,"j",(function(){return f})),n.d(t,"l",(function(){return p})),n.d(t,"b",(function(){return m})),n.d(t,"m",(function(){return d})),n.d(t,"c",(function(){return h})),n.d(t,"n",(function(){return g})),n.d(t,"e",(function(){return b})),n.d(t,"g",(function(){return v})),n.d(t,"p",(function(){return w})),n.d(t,"f",(function(){return y})),n.d(t,"o",(function(){return _})),n.d(t,"q",(function(){return k})),n.d(t,"h",(function(){return x})),n.d(t,"a",(function(){return O})),n.d(t,"r",(function(){return P}));n("d3b7"),n("ac1f"),n("841c");var o=n("2b0e"),a=(n("159b"),n("b64b"),n("d81d"),["X-PAGINATION-TOTAL-COUNT","X-PAGINATION-PER-PAGE","X-PAGINATION-PAGE-COUNT","X-PAGINATION-CURRENT-PAGE"]);function r(e){Object.keys(e.headers).forEach((function(t){e.headers[t.toUpperCase()]=e.headers[t],delete e.headers[t]}));var t={current:1,pageCount:1,totalCount:1};a.forEach((function(t){Object.keys(e.headers).map((function(n){t===n&&(e.headers[n]=parseInt(e.headers[n]))}))})),t.current=e.headers["X-PAGINATION-CURRENT-PAGE"],t.pageCount=e.headers["X-PAGINATION-PAGE-COUNT"],t.totalCount=e.headers["X-PAGINATION-TOTAL-COUNT"],e.pagination=t}var i=o["default"].prototype.$heshop,s=o["default"].prototype.$message.error;function l(e){var t=e.tabKey,n=void 0===t?"all":t,o=e.page,a=void 0===o?1:o;return new Promise((function(e){i.search("post",{include:"goods"},{keyword:{tab_key:n}}).page(a,10).then((function(t){r(t);var n=t.data,o=t.pagination;e({data:n,pagination:o})})).catch((function(e){s(e.data.message)}))}))}function c(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:1;return new Promise((function(t){i.finance("get").page(e,10).then((function(e){r(e);var n=e.data,o=e.pagination;t({data:n,pagination:o})})).catch((function(e){s(e.data.message)}))}))}function u(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:1,t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return new Promise((function(n){i.search("post",{include:"promoterorder"},t).page(e,10).then((function(e){r(e);var t=e.data,o=e.pagination;n({data:t,pagination:o})})).catch((function(e){s(e.data.message)}))}))}function f(){return new Promise((function(e){i.promoterlevel("get").then((function(t){e(t)})).catch((function(e){s(e.data.message)}))}))}function p(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:1;return new Promise((function(t){i.promotermaterial("get").page(e,10).then((function(e){r(e);var n=e.data,o=e.pagination;t({data:n,pagination:o})})).catch((function(e){s(e.data.message)}))}))}function m(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return new Promise((function(t){i.promotermaterial("post",e).then((function(e){t(e)})).catch((function(e){s(e.data.message)}))}))}function d(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:1,t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return new Promise((function(n){i.promoterzone("get",t).page(e,10).then((function(e){r(e);var t=e.data,o=e.pagination;n({data:t,pagination:o})})).catch((function(e){s(e.data.message)}))}))}function h(e){return new Promise((function(t){i.promoterzone("post",e).then((function(e){t(e)})).catch((function(e){s(e.data.message)}))}))}function g(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return new Promise((function(t,n){i.setting("post",{keyword:"commission_setting",content:e}).then((function(e){t(e)})).catch((function(e){n(e)}))}))}function b(){return new Promise((function(e,t){i.search("post",{include:"setting"},{keyword:"commission_setting"}).then((function(t){e(t)})).catch((function(e){s(e.data.message),t()}))}))}function v(){return new Promise((function(e,t){i.search("post",{include:"setting"},{keyword:"promoter_setting"}).then((function(t){e(t)})).catch((function(e){s(e.data.message),t()}))}))}function w(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return new Promise((function(t,n){i.setting("post",{keyword:"promoter_setting",content:e}).then((function(e){t(e)})).catch((function(e){n(e)}))}))}function y(){return new Promise((function(e,t){i.search("post",{include:"setting"},{keyword:"promoter_rank"}).then((function(t){e(t)})).catch((function(e){s(e.data.message),t()}))}))}function _(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return new Promise((function(t,n){i.setting("post",{keyword:"promoter_rank",content:e}).then((function(e){t(e)})).catch((function(e){n(e)}))}))}function k(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return new Promise((function(t,n){i.setting("post",{keyword:"promoter_recruit_make",content:e}).then((function(e){t(e)})).catch((function(e){n(e)}))}))}function x(){return new Promise((function(e,t){i.search("post",{include:"setting"},{keyword:"promoter_recruit_make"}).then((function(t){e(t.content)})).catch((function(e){s(e.data.message),t()}))}))}function O(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"",n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};return new Promise((function(o,a){i.promoter("put",{id:e,behavior:t},n).then((function(e){console.log(e),o(e)})).catch((function(e){s(e.data.message),a()}))}))}function P(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{uid:"",mobile:""};return new Promise((function(t,n){i.promoter("get",{behavior:"transfer_search",from_uid:e.uid,mobile:e.mobile}).then((function(e){console.log(e),t(e)})).catch((function(e){n(e)}))}))}},"4dff":function(e,t,n){"use strict";n("bd05")},8236:function(e,t,n){"use strict";n("ac1f"),n("5319"),n("159b"),n("b64b");t["a"]={data:function(){},methods:{replaceQuery:function(){var e=Object.assign({},this.$route.query,this.form);this.$router.replace({query:e})},getQuery:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:["page"],t=this.$route.query;return Object.keys(t).forEach((function(n){for(var o=0;o<e.length;o++)e[o]===n&&(isNaN(t[n])?t[n]=1:t[n]=parseInt(t[n]))})),Object.assign(this.form,t)},emptyStatus:function(){this.$router.replace({query:{}})}},filters:{}}},"86c3":function(e,t,n){"use strict";n.r(t);var o,a,r,i,s,l,c=n("ade3"),u=n("5530"),f=n("2638"),p=n.n(f),m=(n("ac1f"),n("841c"),n("d81d"),n("b0c0"),n("4de4"),n("4e82"),n("8236")),d=n("0e28"),h={name:"agree-refuse-apply",data:function(){return{note:""}},props:{value:{type:Boolean,default:!1},info:{type:[Object]},type:{type:String}},computed:{showDialog:{get:function(e){var t=e.value;return t},set:function(e){this.$emit("input",e)}}},render:function(){var e=this,t=arguments[0],n=this;return t("el-dialog",p()([{class:"le-form",attrs:{visible:n.showDialog,title:"申请分销商",width:"576px"}},{on:Object(c["a"])({},"update:visible",(function(e){n.showDialog=e}))}]),[t("el-form",{attrs:{"label-width":"136px"}},[t("el-form-item",{attrs:{label:"用户"}},[t("span",{class:["weapp"===n.info.type?"le-icon-xiaochengxu":"le-icon-wehcat","le-icon"]}),n.info.nickname]),t("el-form-item",{attrs:{label:"姓名"}}),t("el-form-item",{attrs:{label:"性别"}}),t("el-form-item",{attrs:{label:"地址"}}),function(){if("refuse"===n.type)return t("el-form-item",{attrs:{label:"拒绝理由"}},[t("el-input",{attrs:{type:"textarea",rows:"8",className:"le-input--280",placeholder:"请输入拒绝理由",resize:"none",maxlength:"200","show-word-limit":!0},model:{value:n.note,callback:function(t){e.$set(n,"note",t)}}})])}()]),t("div",{slot:"footer"},[t("el-button",["取消"]),t("el-button",{attrs:{type:"primary"},on:{click:n.submit}},["refuse"===n.type?"拒绝":"agree"===n.type?"通过审核":""])])])},methods:{submit:function(){var e=this,t="",n={};"refuse"===this.type?(t="拒绝分销商申请成功",n.note=this.note):"agree"===this.type&&(t="通过分销商申请成功"),Object(d["a"])(this.info.UID,"refuse",n).then((function(n){console.log(n),e.showDialog=!1,e.$message.success(t)}))}}},g=h,b=(n("a76d"),n("2877")),v=Object(b["a"])(g,o,a,!1,null,"97f94200",null),w=v.exports,y=n("1da1"),_=(n("96cf"),n("d3b7"),n("25f0"),{name:"clear-out",data:function(){return{form:{radio:1,select:""},list:[],loading:!1}},props:{value:{type:Boolean,default:!1},info:{type:[Object]}},computed:{showDialog:{get:function(e){var t=e.value;return t},set:function(e){this.$emit("input",e)}}},render:function(){var e=this,t=arguments[0],n=this;return t("el-dialog",p()([{attrs:{visible:n.showDialog,title:"清退分销商",width:"512px"}},{on:Object(c["a"])({},"update:visible",(function(e){n.showDialog=e}))}]),[t("div",{class:"le-hint"},["清退分销商后，此分销商与所有下线的上下级关系将被解除"]),t("el-form",{attrs:{"label-width":"129px"}},[t("el-form-item",{attrs:{label:"清退后的关系处理"}},[t("el-radio-group",{model:{value:n.form.radio,callback:function(t){e.$set(n.form,"radio",t)}}},[t("div",[t("el-radio",["自由绑定分销商"]),t("div",{class:"le-prompt-text"},["选择后，下线用户将重新自由绑定分销商"])]),t("div",[t("el-radio",["转移给指定分销商"]),t("div",{class:"le-prompt-text"},["选择后，下线分销商和下线用户将转移给新的分销商"]),t("el-select",{attrs:{loading:n.loading,filterable:!0,remote:!0,placeholder:"请输入新分销商的手机号搜索","remote-method":n.remoteMethod},on:{change:n.selectMobile},model:{value:n.form.select,callback:function(t){e.$set(n.form,"select",t)}}},[n.list.map((function(e,n){return t("el-option",{key:n,attrs:{label:e.mobile,value:e.mobile}})}))])])])])])])},methods:{handleSelect:function(){},remoteMethod:function(e){var t=this;return Object(y["a"])(regeneratorRuntime.mark((function n(){var o;return regeneratorRuntime.wrap((function(n){while(1)switch(n.prev=n.next){case 0:if(""===e){n.next=7;break}return t.loading=!0,n.next=4,Object(d["r"])({uid:t.info.UID,mobile:t.info.mobile});case 4:o=n.sent,t.list=o.filter((function(t){return t.mobile=t.mobile.toString(),t.mobile.indexOf(e)>-1})),t.loading=!1;case 7:case"end":return n.stop()}}),n)})))()},selectMobile:function(){console.log(12)}}}),k=_,x=(n("f11e"),Object(b["a"])(k,r,i,!1,null,"419d73c0",null)),O=x.exports,P={mixins:[m["a"]],components:{agreeRefuseApply:w,clearOut:O},data:function(){return{form:{source:"",level:0,state:1,apply_time:[],join_time:[],search:"",page:1,invite:"",sort:{apply_time:"DESC"}},page:{size:20},levelList:[],list:[],showAgreeRefuse:!1,agreeRefuseInfo:{},agreeRefuseType:"",showClearOut:!0,clearOutInfo:{}}},render:function(){var e=this,t=arguments[0],n=this;return t("div",{class:"le-main"},[t("el-button",{attrs:{type:"primary"}},["添加分销商"]),t("el-form",p()([{},{props:{model:n.form}},{class:"le-card",attrs:{inline:!0,"label-width":"125px"}}]),[t("el-form-item",{attrs:{label:"分销商搜索"}},[t("el-input",{attrs:{value:n.form.search,placeholder:"输入ID/昵称/姓名/手机号搜索"},on:{input:function(e){n.form.search=e}},model:{value:n.form.search,callback:function(t){e.$set(n.form,"search",t)}}})]),t("el-form-item",{attrs:{label:"邀请方搜索"}},[t("el-input",{attrs:{value:n.form.invite,placeholder:"输入昵称搜索"},on:{input:function(e){n.form.invite=e}}})]),t("el-form-item",{attrs:{label:"分销商等级"}},[t("el-select",{attrs:{placeholder:"请选择"},model:{value:n.form.level,callback:function(t){e.$set(n.form,"level",t)}}},[t("el-option",{attrs:{label:"全部",value:0}}),n.levelList.map((function(e,n){return t("el-option",{key:n,attrs:{label:e.name,value:e.level}})}))])]),t("el-form-item",{attrs:{label:"用户来源"}},[t("el-select",{attrs:{placeholder:"请选择"},model:{value:n.form.source,callback:function(t){e.$set(n.form,"source",t)}}},[t("el-option",{attrs:{label:"全部",value:""}}),t("el-option",{attrs:{label:"微信小程序",value:"weapp"}}),t("el-option",{attrs:{label:"公众号",value:"wechat"}})])]),t("el-form-item",{attrs:{label:"状态"}},[t("el-select",{attrs:{placeholder:"请选择"},model:{value:n.form.state,callback:function(t){e.$set(n.form,"state",t)}}},[t("el-option",{attrs:{label:"全部",value:1}}),t("el-option",{attrs:{label:"待审核",value:2}}),t("el-option",{attrs:{label:"已通过",value:3}}),t("el-option",{attrs:{label:"已拒绝",value:4}}),t("el-option",{attrs:{label:"已清退",value:5}})])]),t("el-form-item",{attrs:{label:"申请时间"}},[t("el-date-picker",{attrs:{size:"small",type:"datetimerange","range-separator":"至","start-placeholder":"开始日期","end-placeholder":"结束日期"},model:{value:n.form.apply_time,callback:function(t){e.$set(n.form,"apply_time",t)}}})]),t("el-form-item",{attrs:{label:"加入时间"}},[t("el-date-picker",{attrs:{size:"small",type:"datetimerange","range-separator":"至","start-placeholder":"开始日期","end-placeholder":"结束日期"},model:{value:n.form.join_time,callback:function(t){e.$set(n.form,"join_time",t)}}})]),t("div",{class:"le-button"},[t("el-button",{attrs:{type:"primary"},on:{click:n.filter}},["筛选"]),t("el-button",{on:{click:n.empty}},["清空"])])]),t("div",{class:"le-card le-table"},[t("el-table",p()([{attrs:{height:"650"},on:Object(u["a"])({},{"sort-change":n.sortList})},{props:{data:this.list}},{attrs:{"default-sort":{prop:"apply_time",order:"descending"},"row-class-name":"le-table-row"}}]),[t("el-table-column",{attrs:{label:"基本信息",width:"288px",fixed:"left"},scopedSlots:{default:function(e){return t("div",{attrs:{"slot-scope":"scope"},class:"flex"},[t("div",[t("el-avatar",{attrs:{size:48,error:function(){return!0}}},[t("img",{attrs:{src:e.row.avatar}})])]),t("div",{class:"le-usercontent"},[t("div",{class:"le-user"},[t("i",{class:"le-icon le-icon-".concat("weapp"==e.row.type?"xiaochengxu":"wehcat")}),t("span",{class:"le-username"},[e.row.nickname])]),t("div",{class:"le-userinfor"},["ID:",e.row.UID,t("br"),e.row.realname,t("br"),e.row.mobile])])])}}}),t("el-table-column",{attrs:{label:"分销商等级"},scopedSlots:{default:function(e){return e.row.level_name}}}),t("el-table-column",{attrs:{label:"邀请方"},scopedSlots:{default:function(e){return e.row.invite_nickname?e.row.invite_nickname:"--"}}}),t("el-table-column",{attrs:{label:"累计销售金额(元)",sortable:"custom","min-width":"140px",prop:"sales_amount"},scopedSlots:{default:function(e){return 2===e.row.status?e.row.sales_amount:"--"}}}),t("el-table-column",{attrs:{label:"累计佣金(元)",sortable:"custom",prop:"commission_amount","min-width":"120px"},scopedSlots:{default:function(e){return 2===e.row.status?e.row.all_commission_amount:"--"}}}),t("el-table-column",{attrs:{label:"当前下线数",prop:"all_children",sortable:"custom","min-width":"120px"},scopedSlots:{default:function(e){return 2===e.row.status?e.row.all_children:"--"}}}),t("el-table-column",{attrs:{label:"累计邀请分销商",sortable:"custom",prop:"invite_number","min-width":"130px"},scopedSlots:{default:function(e){return 2===e.row.status?e.row.invite_number:"--"}}}),t("el-table-column",{attrs:{label:"状态","min-width":"100px"},scopedSlots:{default:function(e){var n=e.row.status;return t("el-tag",{attrs:{effect:"plain",size:"medium",type:2===n?"success":1===n?"warning":3===n?"danger":4===n?"info":""}},[2===n?"已通过":1===n?"待审核":3===n?"已拒绝":4===n?"已清退":""])}}}),t("el-table-column",{attrs:{label:"时间",sortable:"custom",prop:"apply_time","min-width":"180px"},scopedSlots:{default:function(e){var o=e.row.apply_time?n.$moment(new Date(1e3*e.row.apply_time)).format("Y-MM-DD HH:mm:ss"):"--",a=e.row.join_time?n.$moment(new Date(1e3*e.row.join_time)).format("Y-MM-DD HH:mm:ss"):"--";return t("span",["申请：",o,function(){if(2===e.row.status)return[[t("br")],["加入：".concat(a)]]}()])}}}),t("el-table-column",{attrs:{label:"操作","min-width":"220px"},scopedSlots:{default:function(e){return t("div",{class:"le-table-operate flex align-center"},[t("el-button",{attrs:{type:"text"},on:{click:n.routerDetail.bind(n,e.row.UID)}},["详情"]),function(){return 2===e.row.status?[[t("span",{class:"le-line"})],[t("el-button",{on:{click:n.clearOut.bind(n,e.row)},attrs:{type:"text"}},["清退"])]]:1===e.row.status?[[t("span",{class:"le-line"})],[t("el-button",{attrs:{type:"text"},on:{click:n.agreeRefuse.bind(n,e.row,"agree")}},["通过"])],[t("span",{class:"le-line"})],[t("el-button",{attrs:{type:"text"},on:{click:n.agreeRefuse.bind(n,e.row,"refuse")}},["拒绝"])]]:void 0}()])}}})]),t("div",{class:"flex le-pagination justify-end"},[t("el-pagination",{attrs:{background:!0,"current-page":n.form.page,layout:"prev, pager, next, jumper","page-count":n.page.count},on:{"current-change":n.switchPage}})])]),t(w,{attrs:{type:n.agreeRefuseType,info:n.agreeRefuseInfo},model:{value:n.showAgreeRefuse,callback:function(t){e.$set(n,"showAgreeRefuse",t)}}}),t(O,{attrs:{info:n.clearOutInfo},model:{value:n.showClearOut,callback:function(t){e.$set(n,"showClearOut",t)}}})])},mounted:function(){this.form=Object.assign({},this.form,this.$route.query),this.form.page=this.getParseInt(this.form.page),this.form.state=this.getParseInt(this.form.state),this.form.grade=this.getParseInt(this.form.grade),this.getLevel(),this.getList()},methods:{routerDetail:function(e){this.$router.push({path:"/promoter/index-detail/"+e})},switchPage:function(e){this.form.page=e,this.replaceQuery(),this.getList()},filter:function(){this.getList(),this.replaceQuery()},empty:function(){this.form={source:"",grade:0,state:1,apply_time:[],join_time:[],search:"",page:1,invite:"",sort:this.form.sort},this.filter()},getParseInt:function(e){return isNaN(e)?0:parseInt(e)},sortList:function(e){this.form.sort=Object(c["a"])({},e.prop,"descending"==e.order?"DESC":"ASC"),this.getList(),this.replaceQuery()},getList:function(){var e=this,t=JSON.parse(JSON.stringify(this.form));t["apply_time_start"]=t.apply_time[0]?Date.parse(t.apply_time[0])/1e3:0,t["apply_time_end"]=t.apply_time[1]?Date.parse(t.apply_time[1])/1e3:0,t["join_time_start"]=t.join_time[0]?Date.parse(t.join_time[0])/1e3:0,t["join_time_end"]=t.join_time[1]?Date.parse(t.join_time[1])/1e3:0,this.$heshop.search("post",{include:"promoter"},{keyword:t}).page(this.form.page,this.page.size).then((function(t){var n=t.data,o=t.headers;e.list=n,e.form.page=+o["x-pagination-current-page"],e.page={count:+o["x-pagination-page-count"],size:+o["x-pagination-per-page"],total:+o["x-pagination-total-count"]}})).catch((function(t){e.$message.error(t.data.message)}))},getLevel:function(){var e=this;this.$heshop.promoterlevel("get").then((function(t){e.levelList=t})).catch((function(t){e.$message.error(t.data.message)}))},agreeRefuse:function(e,t){this.showAgreeRefuse=!0,this.agreeRefuseInfo=e,this.agreeRefuseType=t,console.log(this.agreeRefuseInfo)},clearOut:function(e){this.showClearOut=!0,this.clearOutInfo=e}}},I=P,j=(n("4dff"),Object(b["a"])(I,s,l,!1,null,"f270a7d2",null));t["default"]=j.exports},a76d:function(e,t,n){"use strict";n("ad9a")},ad9a:function(e,t,n){},bd05:function(e,t,n){},f11e:function(e,t,n){"use strict";n("01a0")}}]);
//# sourceMappingURL=promoter-index.92c35406.js.map